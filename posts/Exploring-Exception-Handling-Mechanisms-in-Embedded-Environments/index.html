<!doctype html>














<!-- `site.alt_lang` can specify a language different from the UI -->
<html lang="en" >
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7">
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta
    name="viewport"
    content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover"
  ><!-- Setup Open Graph image -->

  

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v4.3.3" />
<meta property="og:title" content="Efficient Exception Handling in Resource-Constrained Embedded Systems" />
<meta property="og:locale" content="en" />
<meta name="description" content="Introduction" />
<meta property="og:description" content="Introduction" />
<link rel="canonical" href="http://localhost:4000/posts/Exploring-Exception-Handling-Mechanisms-in-Embedded-Environments/" />
<meta property="og:url" content="http://localhost:4000/posts/Exploring-Exception-Handling-Mechanisms-in-Embedded-Environments/" />
<meta property="og:site_name" content="Mustafa Alotbah’s Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2023-12-22T12:41:00+01:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Efficient Exception Handling in Resource-Constrained Embedded Systems" />
<meta name="twitter:site" content="@" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-12-22T12:41:00+01:00","datePublished":"2023-12-22T12:41:00+01:00","description":"Introduction","headline":"Efficient Exception Handling in Resource-Constrained Embedded Systems","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/posts/Exploring-Exception-Handling-Mechanisms-in-Embedded-Environments/"},"url":"http://localhost:4000/posts/Exploring-Exception-Handling-Mechanisms-in-Embedded-Environments/"}</script>
<!-- End Jekyll SEO tag -->


  <title>Efficient Exception Handling in Resource-Constrained Embedded Systems | Mustafa Alotbah's Blog
  </title>

  <!--
  The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps
  Generated by: https://realfavicongenerator.net/
-->



<link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png">

  <link rel="manifest" href="/assets/img/favicons/site.webmanifest">

<link rel="shortcut icon" href="/assets/img/favicons/favicon.ico">
<meta name="apple-mobile-web-app-title" content="Mustafa Alotbah's Blog">
<meta name="application-name" content="Mustafa Alotbah's Blog">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml">
<meta name="theme-color" content="#ffffff">


  <!-- Resource Hints -->
  
    
      
        <link rel="preconnect" href="https://fonts.googleapis.com" >
      
        <link rel="dns-prefetch" href="https://fonts.googleapis.com" >
      
    
      
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      
        <link rel="dns-prefetch" href="https://fonts.gstatic.com" >
      
    
      
        <link rel="preconnect" href="https://cdn.jsdelivr.net" >
      
        <link rel="dns-prefetch" href="https://cdn.jsdelivr.net" >
      
    
  

  <!-- Bootstrap -->
  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
  

  <!-- Theme style -->
  <link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css">

  <!-- Web Font -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap">

  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.2/css/all.min.css">

  <!-- 3rd-party Dependencies -->

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.27.20/dist/tocbot.min.css">
  

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css">
  

  
    <!-- Image Popup -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css">
  

  <!-- JavaScript -->

  
    <!-- Switch the mode between dark and light. -->

<script type="text/javascript">
  class ModeToggle {
    static get MODE_KEY() {
      return 'mode';
    }
    static get MODE_ATTR() {
      return 'data-mode';
    }
    static get DARK_MODE() {
      return 'dark';
    }
    static get LIGHT_MODE() {
      return 'light';
    }
    static get ID() {
      return 'mode-toggle';
    }

    constructor() {
      let self = this;this.sysDarkPrefers.addEventListener('change', () => {
        if (self.hasMode) {
          self.clearMode();
        }
        self.notify();
      });

      if (!this.hasMode) {
        return;
      }

      if (this.isDarkMode) {
        this.setDark();
      } else {
        this.setLight();
      }
    }

    get sysDarkPrefers() {
      return window.matchMedia('(prefers-color-scheme: dark)');
    }

    get isPreferDark() {
      return this.sysDarkPrefers.matches;
    }

    get isDarkMode() {
      return this.mode === ModeToggle.DARK_MODE;
    }

    get hasMode() {
      return this.mode != null;
    }

    get mode() {
      return sessionStorage.getItem(ModeToggle.MODE_KEY);
    }get modeStatus() {
      if (this.hasMode) {
        return this.mode;
      } else {
        return this.isPreferDark ? ModeToggle.DARK_MODE : ModeToggle.LIGHT_MODE;
      }
    }

    setDark() {
      document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE);
      sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE);
    }

    setLight() {
      document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE);
      sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE);
    }

    clearMode() {
      document.documentElement.removeAttribute(ModeToggle.MODE_ATTR);
      sessionStorage.removeItem(ModeToggle.MODE_KEY);
    }notify() {
      window.postMessage(
        {
          direction: ModeToggle.ID,
          message: this.modeStatus
        },
        '*'
      );
    }

    flipMode() {
      if (this.hasMode) {
        this.clearMode();
      } else {
        if (this.isPreferDark) {
          this.setLight();
        } else {
          this.setDark();
        }
      }

      this.notify();
    }
  }

  const modeToggle = new ModeToggle();
</script>

  

  <!-- A placeholder to allow defining custom metadata -->





<!-- Link to the GitHub Dark theme stylesheet -->
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css">
<!-- <link rel="stylesheet" href="path/to/your/custom-styles.css"> -->
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>

<!-- Include the Line Numbers Plugin JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlightjs-line-numbers.js/2.8.0/highlightjs-line-numbers.min.js"></script>


<!-- Initialize Highlight.js -->
<script>
  document.addEventListener('DOMContentLoaded', (event) => {
    hljs.highlightAll();
    hljs.initLineNumbersOnLoad();
  });
</script>

<!-- Override background color with inline styles -->
<style>
  .hljs {
    background: #151515 !important; /* Replace with your desired background color */
    border: 1px solid #444; /* Gray border */
    border-radius: 8px; /* Rounded corners */
    padding: 10px; /* Optional: Add some padding for better readability */
  }

  .hljs-ln-numbers {
    text-align: right !important;
    padding-right: 5px !important;
    user-select: none !important;
    opacity: 0.5 !important;
}

.hljs-ln-code {
    padding-left: 5px !important;
}
</style>

<script type="text/x-mathjax-config">
  MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\(', '\)']],
      displayMath: [['$$', '$$'], ['\[', '\]']]
    },
    options: {
      skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
  };
</script>
<script type="text/javascript" id="MathJax-script" async
        src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
</head>


  <body>
    <!-- The Side Bar -->

<aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end">
  <header class="profile-wrapper">
    <a href="/" id="avatar" class="rounded-circle"><img src="/assets/images/mustafa.png" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a>

    <h1 class="site-title">
      <a href="/">Mustafa Alotbah's Blog</a>
    </h1>
    <p class="site-subtitle fst-italic mb-0">A Computer Science dedicated blog.</p>
  </header>
  <!-- .profile-wrapper -->

  <nav class="flex-column flex-grow-1 w-100 ps-0">
    <ul class="nav">
      <!-- home -->
      <li class="nav-item">
        <a href="/" class="nav-link">
          <i class="fa-fw fas fa-home"></i>
          <span>HOME</span>
        </a>
      </li>
      <!-- the real tabs -->
      
        <li class="nav-item">
          <a href="/categories/" class="nav-link">
            <i class="fa-fw fas fa-stream"></i>
            

            <span>CATEGORIES</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/tags/" class="nav-link">
            <i class="fa-fw fas fa-tags"></i>
            

            <span>TAGS</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/archives/" class="nav-link">
            <i class="fa-fw fas fa-archive"></i>
            

            <span>ARCHIVES</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/about/" class="nav-link">
            <i class="fa-fw fas fa-info-circle"></i>
            

            <span>ABOUT</span>
          </a>
        </li>
        <!-- .nav-item -->
      
    </ul>
  </nav>

  <div class="sidebar-bottom d-flex flex-wrap  align-items-center w-100">
    
      <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle">
        <i class="fas fa-adjust"></i>
      </button>

      
        <span class="icon-border"></span>
      
    

    
      

      
        <a
          href="https://github.com/mustafaalotbah"
          aria-label="github"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fab fa-github"></i>
        </a>
      
    
      

      
        <a
          href="javascript:location.href = 'mailto:' + ['mustafa.alotbah','gmail.com'].join('@')"
          aria-label="email"
          

          

          

          
        >
          <i class="fas fa-envelope"></i>
        </a>
      
    
      

      
        <a
          href="/feed.xml"
          aria-label="rss"
          

          

          

          
        >
          <i class="fas fa-rss"></i>
        </a>
      
    
      

      
        <a
          href="https://www.linkedin.com/in/alotbah"
          aria-label="linkedin"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fab fa-linkedin"></i>
        </a>
      
    
  </div>
  <!-- .sidebar-bottom -->
</aside>
<!-- #sidebar -->


    <div id="main-wrapper" class="d-flex justify-content-center">
      <div class="container d-flex flex-column px-xxl-5">
        <!-- The Top Bar -->

<header id="topbar-wrapper" aria-label="Top Bar">
  <div
    id="topbar"
    class="d-flex align-items-center justify-content-between px-lg-3 h-100"
  >
    <nav id="breadcrumb" aria-label="Breadcrumb">
      

      
        
          
            <span>
              <a href="/">Home</a>
            </span>

          
        
          
        
          
            
              <span>Efficient Exception Handling in Resource-Constrained Embedded Systems</span>
            

          
        
      
    </nav>
    <!-- endof #breadcrumb -->

    <button type="button" id="sidebar-trigger" class="btn btn-link">
      <i class="fas fa-bars fa-fw"></i>
    </button>

    <div id="topbar-title">
      Post
    </div>

    <button type="button" id="search-trigger" class="btn btn-link">
      <i class="fas fa-search fa-fw"></i>
    </button>

    <search id="search" class="align-items-center ms-3 ms-lg-0">
      <i class="fas fa-search fa-fw"></i>
      <input
        class="form-control"
        id="search-input"
        type="search"
        aria-label="search"
        autocomplete="off"
        placeholder="Search..."
      >
    </search>
    <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button>
  </div>
</header>


        <div class="row flex-grow-1">
          <main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              <!-- Refactor the HTML structure -->



<!--
  In order to allow a wide table to scroll horizontally,
  we suround the markdown table with `<div class="table-wrapper">` and `</div>`
-->



<!--
  Fixed kramdown code highlight rendering:
  https://github.com/penibelst/jekyll-compress-html/issues/101
  https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901
-->



<!-- Change the icon of checkbox -->



<!-- Handle images -->





<!-- Add header for code snippets -->



<!-- Create heading anchors -->





  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  




<!-- return -->




<article class="px-1">
  <header>
    <h1 data-toc-skip>Efficient Exception Handling in Resource-Constrained Embedded Systems</h1>
    

    <div class="post-meta text-muted">
      <!-- published date -->
      <span>
        Posted
        <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1703245260"
  data-df="ll"
  
    data-bs-toggle="tooltip" data-bs-placement="bottom"
  
>
  Dec 22, 2023
</time>

      </span>

      <!-- lastmod date -->
      

      

      <div class="d-flex justify-content-between">
        <!-- author(s) -->
        <span>
          

          By

          <em>
            
              <a href="https://github.com/mustafaalotbah">Mustafa Alotbah</a>
            
          </em>
        </span>

        <div>
          <!-- pageviews -->
          

          <!-- read time -->
          <!-- Calculate the post's reading time, and display the word count in tooltip -->



<!-- words per minute -->










<!-- return element -->
<span
  class="readtime"
  data-bs-toggle="tooltip"
  data-bs-placement="bottom"
  title="4822 words"
>
  <em>26 min</em> read</span>

        </div>
      </div>
    </div>
  </header>

  <div class="content">
    <h2 id="introduction">1. <span class="me-2">Introduction</span><a href="#introduction" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>This article provides a comprehensive analysis of exception handling mechanisms specifically designed for embedded systems, where resource constraints and performance optimization are paramount. In such environments, traditional C++ exception handling is often deemed impractical due to the substantial overhead it incurs. Consequently, developers frequently resort to disabling exceptions using compiler flags such as <code class="language-plaintext highlighter-rouge">-fno-exceptions</code>. Despite this, the necessity for robust error management remains critical, especially in scenarios where system stability must be preserved in the face of unexpected errors.</p>

<p>To address these challenges, this article explores a range of alternative error-handling strategies that are more suitable for embedded systems. The discussion begins with low-level constructs such as <code class="language-plaintext highlighter-rouge">goto</code> statements and function pointers, which provide direct and efficient methods for error management. It then advances to more sophisticated techniques involving <code class="language-plaintext highlighter-rouge">setjmp</code> and <code class="language-plaintext highlighter-rouge">longjmp</code>, which enable the simulation of exception handling with minimal resource consumption. Through detailed and practical examples, we illustrate how these methods can be effectively implemented in resource-constrained environments, ensuring that errors are managed gracefully without compromising system performance.</p>

<p>In addition to these low-level approaches, the article also examines modern C++ techniques that offer lightweight alternatives to traditional exceptions. Constructs like <code class="language-plaintext highlighter-rouge">std::optional</code> and <code class="language-plaintext highlighter-rouge">std::variant</code> provide structured and efficient methods for error handling, allowing for more granular and type-safe error management with minimal overhead. These modern techniques are particularly advantageous in embedded systems where performance and memory efficiency are critical.</p>

<p>Furthermore, the article addresses the complexities introduced by these alternative methods, particularly concerning resource management and cleanup. Practical solutions are presented to prevent issues such as memory leaks, which are essential for ensuring the long-term reliability of embedded systems. By the conclusion of this article, readers will have gained a thorough understanding of how to implement robust and efficient error-handling mechanisms, leveraging both traditional and modern C++ approaches. This knowledge is vital for enhancing the reliability and sustainability of mission-critical applications in embedded environments.</p>

<h2 id="understanding-setjmp-and-longjmp">2. <span class="me-2">Understanding setjmp and longjmp</span><a href="#understanding-setjmp-and-longjmp" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<h3 id="low-level-error-handling-a-pragmatic-approach">2.1. <span class="me-2">Low-Level Error Handling: A Pragmatic Approach</span><a href="#low-level-error-handling-a-pragmatic-approach" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>Before exploring advanced error-handling constructs like <code class="language-plaintext highlighter-rouge">setjmp</code> and <code class="language-plaintext highlighter-rouge">longjmp</code>, it is instructive to examine a fundamental, low-level approach to error management using function pointers and the <code class="language-plaintext highlighter-rouge">goto</code> statement. This method operates closer to the hardware, offering a highly efficient solution in embedded contexts where minimizing computational overhead is essential.</p>

<p>Consider the following code snippet, which demonstrates this approach:</p>

<pre><code class="language-cpp">#include &lt;iostream&gt;

// environment
void* try_block = nullptr;
volatile int errorCode = 0;

void riskyFunction() {

    // Simulate the effect of longjmp
    std::cout &lt;&lt; "Starting a risky function.\n";
    
    // Mimic throwing an exception (error code: 1)
    if (try_block) {
        errorCode = 1;        // Simulate setting an error code
        goto *try_block;      // Jump back to the try block
    }

    std::cout &lt;&lt; "No errors detected.\n";
}

int main() {

    // Save the address of the try block
    try_block = &amp;&amp;try_block_label;

try_block_label:
    if (errorCode == 0) {
        riskyFunction();
    } else {
        std::cout &lt;&lt; "An error occurred!\n";
    }

    return 0;
}
</code></pre>

<p>The output:</p>

<pre><code class="language-txt">&gt;&gt;&gt;
Starting a risky function.
An error occurred!
</code></pre>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">void* try_block</code>:</p>

    <p>This pointer stores the address of a specific code location, effectively serving as a jump target.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">volatile int errorCode</code>:</p>

    <p>This global variable indicates whether an error has occurred. The <code class="language-plaintext highlighter-rouge">volatile</code> qualifier ensures that the variable’s value is always read directly from memory, which is crucial in environments where memory consistency is a concern.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">riskyFunction</code>:</p>

    <p>This function simulates a risky operation. If an error is detected, the function jumps back to the location pointed to by <code class="language-plaintext highlighter-rouge">try_block</code>, updating the <code class="language-plaintext highlighter-rouge">errorCode</code> to signal the error.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">goto</code>:</p>

    <p>The <code class="language-plaintext highlighter-rouge">goto</code> statement allows the program to jump back to the <code class="language-plaintext highlighter-rouge">try_block_label</code> if an error is detected, thereby simulating a rudimentary exception handling mechanism.</p>
  </li>
</ul>

<p>While this approach is relatively straightforward, it can be effective in highly constrained environments where even the overhead of <code class="language-plaintext highlighter-rouge">setjmp</code> and <code class="language-plaintext highlighter-rouge">longjmp</code> might be undesirable. However, it is less flexible and more prone to errors compared to higher-level constructs.</p>

<h3 id="advanced-error-handling-leveraging-setjmp-and-longjmp">2.2. <span class="me-2">Advanced Error Handling: Leveraging <code class="language-plaintext highlighter-rouge">setjmp</code> and <code class="language-plaintext highlighter-rouge">longjmp</code></span><a href="#advanced-error-handling-leveraging-setjmp-and-longjmp" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>For scenarios that demand a higher level of abstraction and control, <code class="language-plaintext highlighter-rouge">setjmp</code> and <code class="language-plaintext highlighter-rouge">longjmp</code> offer a powerful mechanism to save and restore the program’s execution context. The <code class="language-plaintext highlighter-rouge">setjmp</code> function captures the current environment—including the stack context and registers—into a buffer (typically of type <code class="language-plaintext highlighter-rouge">jmp_buf</code>), while <code class="language-plaintext highlighter-rouge">longjmp</code> restores this environment, effectively reverting the program’s state to the point where <code class="language-plaintext highlighter-rouge">setjmp</code> was initially invoked.</p>

<p>Consider the following implementation:</p>

<pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;csetjmp&gt;

jmp_buf environment;

void riskyFunction() {
    if (/* some error condition */) {
        // Simulates throw Error(code=1)
        longjmp(environment, 1);
    }
    std::cout &lt;&lt; "No errors detected.\n";
}

int main() {
    int errorCode = setjmp(environment);
    if (errorCode == 0) {
        // Simulates Try block
        riskyFunction();
    } else {
        // Simulates Catch block
        std::cout &lt;&lt; "An error occurred!\n";
    }
    return 0;
}
</code></pre>

<p>This example illustrates the practical utility of <code class="language-plaintext highlighter-rouge">setjmp</code> and <code class="language-plaintext highlighter-rouge">longjmp</code> in managing control flow amidst errors—a particularly valuable capability in embedded systems where traditional exception handling is not feasible.</p>

<h3 id="handling-typed-exceptions-with-setjmp-and-longjmp">2.3. <span class="me-2">Handling Typed Exceptions with <code class="language-plaintext highlighter-rouge">setjmp</code> and <code class="language-plaintext highlighter-rouge">longjmp</code></span><a href="#handling-typed-exceptions-with-setjmp-and-longjmp" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>The conceptual framework provided by <code class="language-plaintext highlighter-rouge">setjmp</code> and <code class="language-plaintext highlighter-rouge">longjmp</code> can be extended to handle multiple error types, each requiring a distinct response. This approach allows developers to implement typed exceptions, even in environments where conventional C++ exceptions are unavailable.</p>

<pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;csetjmp&gt;

jmp_buf environment;

int constexpr ValueException  = 1;
int constexpr SyntaxException = 2;

void riskyFunction() {

    if (/* some error condition for value correctness*/) {
        // Simulates throw ValueException;
        longjmp(environment, ValueException);
    }
    
    if (/* some error condition for syntax correctness*/) {
        // Simulates throw SyntaxException;
        longjmp(environment, SyntaxException);
    }

    std::cout &lt;&lt; "No errors detected.\n";
}

int main() {
    int errorCode = setjmp(environment);
    if (errorCode == 0) {
    
        // Simulates Try block
        riskyFunction();
        
    } else if (errorCode == ValueException) {
    
        // Handle Value Error
        std::cout &lt;&lt; "ValueException ocurred\n";
        
    } else if (errorCode == SyntaxException) {
    
        // Handle Syntax Error
        std::cout &lt;&lt; "SyntaxException ocurred\n";
        
    }
    return 0;
}

</code></pre>

<p>This code demonstrates how <code class="language-plaintext highlighter-rouge">longjmp</code> can be employed to simulate typed exception handling, a practice commonly seen in state-based error handling within C. This approach not only enhances the robustness of error management but also introduces a level of granularity that aligns with the nuanced requirements of embedded systems.</p>

<h3 id="exception-propagation-implementing-exception-cascades">2.4. <span class="me-2">Exception Propagation: Implementing Exception Cascades</span><a href="#exception-propagation-implementing-exception-cascades" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>In more complex embedded applications, it is often necessary to propagate exceptions through multiple layers of function calls. The following example illustrates how <code class="language-plaintext highlighter-rouge">longjmp</code> can be utilized to create exception cascades, allowing errors to be propagated and handled at different levels of the program.</p>

<pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;csetjmp&gt;

jmp_buf environment;

void riskyFunction() {
    longjmp(environment, 1);
}

void secondFunction() {
    longjmp(environment, 2);
}

int main() {
    int errorCode = setjmp(environment);
    if (errorCode == 0) {
    
        // Calling a risky function
        riskyFunction();
        
    } else if (errorCode == 1) {
    
        // Handling an error (which can also be handling)
        std::cout &lt;&lt; "riskyFunction called longjmp\n";
        secondFunction();
        
    } else if (errorCode == 2) {
    
        // Exception was thrown while handling another exception
        std::cout &lt;&lt; "secondFunction called longjmp\n";
        
    }
    return 0;
}
</code></pre>

<p>This implementation showcases the flexibility of <code class="language-plaintext highlighter-rouge">longjmp</code> in orchestrating complex control flows within an embedded system. By allowing control to be transferred between disparate parts of the program, <code class="language-plaintext highlighter-rouge">longjmp</code> enables a more nuanced and responsive error-handling strategy, essential in high-stakes embedded applications.</p>

<h2 id="simulating-exception-handling-in-embedded-systems-using-setjmp-and-longjmp">3. <span class="me-2">Simulating Exception Handling in Embedded Systems Using <code class="language-plaintext highlighter-rouge">setjmp</code> and <code class="language-plaintext highlighter-rouge">longjmp</code></span><a href="#simulating-exception-handling-in-embedded-systems-using-setjmp-and-longjmp" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<h3 id="designing-a-basic-exception-handling-framework">3.1. <span class="me-2">Designing a Basic Exception Handling Framework</span><a href="#designing-a-basic-exception-handling-framework" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>The utility of <code class="language-plaintext highlighter-rouge">setjmp</code> and <code class="language-plaintext highlighter-rouge">longjmp</code> extends beyond simple error signaling; these functions can be taken advantage of to construct a rudimentary exception-handling framework that mimics the <code class="language-plaintext highlighter-rouge">try</code>-<code class="language-plaintext highlighter-rouge">catch</code> paradigm of higher-level programming languages. Such a framework is particularly advantageous in embedded systems where traditional C++ exceptions are either impractical or outright disabled.</p>

<h3 id="practical-example-integrating-resource-management-with-exception-handling">3.2. <span class="me-2">Practical Example: Integrating Resource Management with Exception Handling</span><a href="#practical-example-integrating-resource-management-with-exception-handling" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>In embedded systems, resource management is a critical concern, especially given the limited availability of memory and processing power. The following example demonstrates how to implement a simple yet effective exception-handling mechanism that integrates resource management, ensuring that resources are properly released even in the presence of errors.</p>

<p>Let’s define an <code class="language-plaintext highlighter-rouge">ExceptionHandler</code> class that replicates the behavior of <code class="language-plaintext highlighter-rouge">try</code>-<code class="language-plaintext highlighter-rouge">catch</code> blocks in a controlled embedded environment:</p>

<pre><code class="language-cpp">class ExceptionHandler {
public:

    // Register Try block
    ExceptionHandler&amp; Try(std::function&lt;void()&gt; func);

    // Register Catch block
    ExceptionHandler&amp; Catch(std::function&lt;void(int)&gt; func);

    // Execute try/catch
    void Execute();

    // Reset the handler
    void reset();

    // throw an exception
    void throwException(int error = 1);

private:
    bool                     isConfigured_ = false;
    jmp_buf                  environment_;
    std::function&lt;void()&gt;    tryBlock_;
    std::function&lt;void(int)&gt; catchBlock_;
};
</code></pre>

<p>In this implementation, the <code class="language-plaintext highlighter-rouge">Try</code> and <code class="language-plaintext highlighter-rouge">Catch</code> methods serve as configuration functions that register their respective blocks of code:</p>

<pre><code class="language-cpp">ExceptionHandler&amp; ExceptionHandler::Try(std::function&lt;void()&gt; func) {
    tryBlock_     = func;
    isConfigured_ = true;
    return *this;
}

ExceptionHandler&amp; ExceptionHandler::Catch(std::function&lt;void(int)&gt; func) {
    catchBlock_ = func;
    return *this;
}
</code></pre>

<p>The <code class="language-plaintext highlighter-rouge">throwException</code> method triggers the exception handling by calling <code class="language-plaintext highlighter-rouge">longjmp</code> with the appropriate error code:</p>

<pre><code class="language-cpp">void ExceptionHandler::throwException(int error) {
    longjmp(env_, error);
}
</code></pre>

<p>The <code class="language-plaintext highlighter-rouge">Execute</code> method coordinates the execution of the <code class="language-plaintext highlighter-rouge">Try</code> and <code class="language-plaintext highlighter-rouge">Catch</code> blocks, managing control flow based on whether an exception has been thrown:</p>

<ul>
  <li>Setting up the jump environment.</li>
  <li>Executing the <code class="language-plaintext highlighter-rouge">Try</code> block.</li>
  <li>If an error occurs, executing the <code class="language-plaintext highlighter-rouge">Catch</code> block and passing the error code.</li>
  <li>Resetting the handler for the next pair of try-catch blocks.</li>
</ul>

<pre><code class="language-cpp">void ExceptionHandler::Execute() {

    // Ensure the Try and Catch blocks are properly configured
    if (!isConfigured_)  return;
    
    // Set up the environment for potential exceptions
    int result = setjmp(env_);
    if (result == 0) {
        tryBlock_();
    } else {
        catchBlock_(result);
    }

    // Reset the handler state for future use
    reset();
}


void ExceptionHandler::reset() {
    tryBlock_     = nullptr;
    catchBlock_   = nullptr;
    isConfigured_ = false;
}
</code></pre>

<p>Here is an example of how this class might be used:</p>

<pre><code class="language-cpp">int main() {
    ExceptionHandler handler;

    handler.Try([&amp;] {
        // Try block

        std::cout &lt;&lt; "Try block: an error is about to occur.\n";

        // Trigger an exception
        handler.throwException(2);

        std::cout &lt;&lt; "This will not be printed.\n";

    }).Catch([](int error) {
    
        // Handle the exception in the Catch block
        std::cout &lt;&lt; "Catch block: caught error code " &lt;&lt; error &lt;&lt; "!\n";

    }).Execute();

    std::cout &lt;&lt; "Program continues after try/catch.\n";

    return 0;
}
</code></pre>

<p>The output of this program would be:</p>

<pre><code class="language-txt">&gt;&gt;&gt;
Try block: an error is about to occur.
Catch block: An exception was caught with error code (2)!
Program continues after try/catch.
</code></pre>

<h2 id="c-resources">4. <span class="me-2">C++ Resources</span><a href="#c-resources" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>One of the strengths of C++ is its ability to automatically invoke the destructor of a class when it goes out of scope, whether the scope ends normally (by <code class="language-plaintext highlighter-rouge">}</code>) or through an exception. This ensures that resources are freed properly, even when they are allocated within nested functions. This feature, known as <em>stack unwinding</em>, is absent when using the <code class="language-plaintext highlighter-rouge">goto</code> keyword. A critical question arises: do we retain this feature when using <code class="language-plaintext highlighter-rouge">longjmp</code>?</p>

<h3 id="cleaning-up-with-longjmp">4.1. <span class="me-2">Cleaning Up with Longjmp</span><a href="#cleaning-up-with-longjmp" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>The answer is compiler-dependent. For instance, with the <strong>MSVC</strong> compiler, stack unwinding is supported with <code class="language-plaintext highlighter-rouge">longjmp</code>, as evidenced by the following statement: (see <a href="https://learn.microsoft.com/en-us/cpp/c-runtime-library/reference/longjmp">here</a>)</p>

<blockquote>
  <p>In Microsoft C++ code on Windows, <strong><code class="language-plaintext highlighter-rouge">longjmp</code></strong> uses the same stack-unwinding semantics as exception-handling code. It’s safe to use in the same places that C++ exceptions can be raised.</p>
</blockquote>

<p>However, this would be assuming exception semantics are allowed, which is not the case in embedded environments.</p>

<p>In GCC and ARM compilers, exception semantics are excluded from <code class="language-plaintext highlighter-rouge">longjmp</code>. To demonstrate this, consider a <code class="language-plaintext highlighter-rouge">Resource</code> class that tracks resource allocation and deallocation:</p>

<pre><code class="language-cpp">class Resource {
public:
    Resource(const std::string&amp; name) : name_(name) {
        std::cout &lt;&lt; name_ &lt;&lt; " constructed!\n";
    }

    ~Resource() {
        std::cout &lt;&lt; name_ &lt;&lt; " destructed!\n";
    }

private:
    std::string name_;
};
</code></pre>

<p>Now, let’s use this class as follows:</p>

<pre><code class="language-cpp">// Global Exception Handler
ExceptionHandler handler;

int main() {

    handler.Try([&amp;] {
        // Try block

        // This will not be destructed with throwException/longjmp
        Resource res("MyResource"); 

        std::cout &lt;&lt; "Try block: an error is about to occur.\n";

        // Throw Exception
        handler.throwException(2);

        std::cout &lt;&lt; "This will not be printed.\n";

    }).Catch([](int error) {

        // Catch an error
        std::cout &lt;&lt; "Catch block: caught error code (" &lt;&lt; error &lt;&lt; ")!\n";

    }).Execute();

    std::cout &lt;&lt; "Program continues after try/catch.\n";

    return 0;
}
</code></pre>

<p>The output would be:</p>

<pre><code class="language-txt">&gt;&gt;&gt;
MyResource constructed!
Try block: an error is about to occur.
Catch block: An exception was caught with error code (2)!
Program continues after try/catch.
</code></pre>

<p>As observed, the destructor for <code class="language-plaintext highlighter-rouge">MyResource</code> is not invoked, potentially leading to memory leaks—a serious concern in embedded systems.</p>

<h3 id="manual-stack-unwinding">4.2. <span class="me-2">Manual Stack Unwinding</span><a href="#manual-stack-unwinding" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>To address the previous issue, we can manually manage resource cleanup by extending the <code class="language-plaintext highlighter-rouge">ExceptionHandler</code> class:</p>

<pre><code class="language-cpp">template &lt;typename T&gt;
void registerCleanup(T&amp; resource)
{
    cleanupStack_.emplace_back([&amp;resource](){
      resource.~T();
    });
}
</code></pre>

<p>The <code class="language-plaintext highlighter-rouge">cleanupStack_</code> is a vector of destructor functions that are invoked when an exception is thrown:</p>

<pre><code class="language-cpp">std::vector&lt;std::function&lt;void()&gt;&gt; cleanupStack_;
</code></pre>

<p>When an exception is thrown, all registered variables are destructed:</p>

<pre><code class="language-cpp">void ExceptionHandler::throwException(int error)
{
    // Execute destructors first
    for (auto it = cleanupStack_.rbegin(); it != cleanupStack_.rend(); ++it) (*it)();
    cleanupStack_.clear();

    // Then perform long jump
    longjmp(env_, error);
}
</code></pre>

<p>This solution requires developers to manually register each local resource, as demonstrated below:</p>

<pre><code class="language-cpp">// Global Exception Handler
ExceptionHandler handler;

void riskyFunction()
{
    // Resource
    Resource localRes("ResourceInFunction");

    // Register the source before any exception might be thrown
    handler.registerCleanup(localRes);

    // Throw an exception
    handler.throwException(4);

    std::cout &lt;&lt; "functionWithLocalResource: This line won't be executed if an exception is thrown.\n";
}

int main() {

    handler.Try([&amp;] {
        // Try block

        // This will not be destructed with throwException/longjmp
        Resource res("MyResource"); 

        // Register the source before any exception might be thrown
        handler.registerCleanup(res);

        std::cout &lt;&lt; "Try block: an error is about to occur.\n";

        // Call a risky function
        riskyFunction(handler);

        std::cout &lt;&lt; "This will not be printed.\n";

    }).Catch([](int error) {

        // Catch an error
        std::cout &lt;&lt; "Catch block: caught error code (" &lt;&lt; error &lt;&lt; ")!\n";

    }).Execute();

    std::cout &lt;&lt; "Program continues after try/catch.\n";

    return 0;
}
</code></pre>

<p>The output now reflects proper resource cleanup:</p>

<pre><code class="language-txt">&gt;&gt;&gt;
MyResource constructed!
ResourceInFunction constructed!
ResourceInFunction destructed!
MyResource destructed!
Catch block: An exception was caught with error code (2)!
Program continues after try/catch.
</code></pre>

<p>Now, the destructors are invoked as expected. However, it is easy to overlook registering a local variable, which could lead to subtle bugs.</p>

<h3 id="considerations-for-embedded-systems-balancing-complexity-and-efficiency">4.3. <span class="me-2">Considerations for Embedded Systems: Balancing Complexity and Efficiency</span><a href="#considerations-for-embedded-systems-balancing-complexity-and-efficiency" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>While <code class="language-plaintext highlighter-rouge">setjmp</code> and <code class="language-plaintext highlighter-rouge">longjmp</code> offer a powerful means of simulating exception handling in embedded systems, they also introduce significant complexity, particularly in terms of managing the cleanup stack. This complexity is exacerbated in resource-constrained environments, where developers must meticulously balance performance, memory usage, and error handling. The manual cleanup required by GCC and ARM compilers adds another layer of difficulty, emphasizing the importance of thorough testing and validation to ensure system reliability.</p>

<h2 id="alternative-approaches-simplifying-with-goto">5. <span class="me-2">Alternative Approaches: Simplifying with <code class="language-plaintext highlighter-rouge">goto</code></span><a href="#alternative-approaches-simplifying-with-goto" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>In some embedded systems, simplicity and efficiency may outweigh the benefits of structured exception handling. In such cases, using the <code class="language-plaintext highlighter-rouge">goto</code> statement can provide a straightforward and pragmatic error-handling mechanism, albeit at the cost of abstraction and safety.</p>

<pre><code class="language-cpp">#include &lt;iostream&gt;


int riskyFunction() {
    Resource localRes("ResourceInFunction");

    // Assume an error happened
    int errorCode = doSomething(); // returns errorCode 4

    // Check for an error
    if (errorCode != 0) {
        goto cleanup;
    }

    std::cout &lt;&lt; "riskyFunction: This line won't be executed if an error occurs.\n";

cleanup:
    // Clean up resources if necessary
    localRes.release();

    // Return the error code
    return errorCode;
}


int main() {
    int errorCode = 0;
    Resource res("MyResource");

    std::cout &lt;&lt; "Try block: an error is about to occur.\n";

    // Call the risky function and handle errors
    errorCode = riskyFunction();
    if (errorCode != 0) {
        goto cleanup;
    }

    std::cout &lt;&lt; "This will not be printed if an error occurs.\n";

cleanup:
    // Clean up resources
    res.release();

    if (errorCode != 0) {
        std::cout &lt;&lt; "Catch block: caught error code (" &lt;&lt; errorCode &lt;&lt; ")!\n";
    }

    std::cout &lt;&lt; "Program continues after try/catch.\n";

    return errorCode;
}
</code></pre>

<h2 id="alternative-approaches-modern-c">6. <span class="me-2">Alternative Approaches: Modern C++</span><a href="#alternative-approaches-modern-c" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>Beyond the low-level techniques previously discussed, modern C++ introduces several lightweight alternatives to traditional exceptions that are particularly advantageous in resource-constrained embedded systems. These alternatives, including <code class="language-plaintext highlighter-rouge">std::optional</code>, <code class="language-plaintext highlighter-rouge">std::variant</code>, and error codes encapsulated within classes, offer a structured and efficient approach to error handling. Their minimal overhead makes them well-suited for environments where performance and memory efficiency are paramount.</p>

<h3 id="utilizing-stdoptional-for-error-handling">6.1. <span class="me-2">Utilizing <code class="language-plaintext highlighter-rouge">std::optional</code> for Error Handling</span><a href="#utilizing-stdoptional-for-error-handling" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>The <code class="language-plaintext highlighter-rouge">std::optional</code> type, introduced in C++17, encapsulates an object that may or may not hold a value. This type is especially beneficial for functions that might fail to produce a meaningful result, allowing the function to return an “empty” state rather than throwing an exception or returning an error code.</p>

<h4 id="example">6.1.1. <span class="me-2">Example</span><a href="#example" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<pre><code class="language-cpp">#include &lt;iostream&gt;  
#include &lt;optional&gt;  
  
std::optional&lt;int&gt; riskyFunction(int value) { 
  
    // Return an empty optional to indicate an error  
    if (value &lt; 0) return std::nullopt;  
  
    // Return the result as an optional  
    return value * 2;  
}  
  
int main() {  
    auto result = riskyFunction(-5);  
    
    // Handle the error
    if (!result) {  
       std::cout &lt;&lt; "An error occurred: invalid input.\n";  
       exit(0);  // Early termination
    }  
  
    // Valid input, retrieve and display the value
    std::cout &lt;&lt; "Result: " &lt;&lt; result.value() &lt;&lt; "\n";  
    
    return 0;  
}
</code></pre>

<p>In this example, the function <code class="language-plaintext highlighter-rouge">riskyFunction</code> returns an <code class="language-plaintext highlighter-rouge">std::optional&lt;int&gt;</code>, which either contains a valid result or <code class="language-plaintext highlighter-rouge">std::nullopt</code> if an error occurs. This approach avoids the overhead of exceptions while providing a clear mechanism for error checking.</p>

<h3 id="leveraging-stdvariant-for-typed-errors">6.2. <span class="me-2">Leveraging <code class="language-plaintext highlighter-rouge">std::variant</code> for Typed Errors</span><a href="#leveraging-stdvariant-for-typed-errors" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p><code class="language-plaintext highlighter-rouge">std::variant</code>, also introduced in C++17, is a type-safe union that can store one of several types, making it a versatile tool for returning either a result or an error type from a function. This is analogous to using tagged unions in C but with the added safety and flexibility offered by modern C++.</p>

<h4 id="example-for-variant">6.2.1. <span class="me-2">Example for variant</span><a href="#example-for-variant" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;variant&gt;
#include &lt;string&gt;

// Value Error Type
struct ValueError {  
    std::string message;  
};  
  
// Syntax Error Type
struct SyntaxError {  
    std::string message;  
};  

// Result type can be an integer, a value error, or a syntax error
using Result = std::variant&lt;int, ValueError, SyntaxError&gt;;  
  
Result riskyFunction(int value) {  

    // Return a ValueError if the input is negative
    if (value &lt; 0)  return ValueError{"Value cannot be negative"}; 
     
    // Return a SyntaxError if the input is zero
    if (value == 0) return SyntaxError{"Value cannot be zero"};  

    // Return the value
    return value * 2;  
}  
  
int main() {  
    auto result = riskyFunction(0); 
     
    // Check for a ValueError
    if (std::holds_alternative&lt;ValueError&gt;(result)) {
       std::cout &lt;&lt; "Value error: " &lt;&lt; std::get&lt;ValueError&gt;(result).message &lt;&lt; "\n";  
       exit(0);
    }
    
    // Check for a SyntaxError
    if (std::holds_alternative&lt;SyntaxError&gt;(result)) {
       std::cout &lt;&lt; "Syntax error: " &lt;&lt; std::get&lt;SyntaxError&gt;(result).message &lt;&lt; "\n";  
       exit(0);
    }

    // Otherwise, an integer result is assumed
    std::cout &lt;&lt; "Result: " &lt;&lt; std::get&lt;int&gt;(result) &lt;&lt; "\n";  
  
    return 0;  
}
</code></pre>

<p>In this instance, <code class="language-plaintext highlighter-rouge">riskyFunction</code> returns a <code class="language-plaintext highlighter-rouge">std::variant&lt;int, ValueError, SyntaxError&gt;</code>, allowing it to return either a valid result or detailed error information. This approach increases the granularity of error handling while avoiding the performance drawbacks associated with exceptions.</p>

<h3 id="encapsulating-error-codes-within-classes">6.3. <span class="me-2">Encapsulating Error Codes within Classes</span><a href="#encapsulating-error-codes-within-classes" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>Another modern C++ approach involves encapsulating error codes within a class structure. This method enhances code readability and maintainability by associating specific error codes with meaningful class types, as opposed to relying on plain integers.</p>

<p>We will first define a basic <code class="language-plaintext highlighter-rouge">ErrorCode</code> class to encapsulate error types and messages, then construct a <code class="language-plaintext highlighter-rouge">Result</code> class template that encapsulates either a value or an error. Finally, we will demonstrate how to utilize these classes in a function that performs a potentially risky operation and returns either a result or an error.</p>

<h4 id="defining-the-errorcode-class">6.3.1. <span class="me-2">Defining the <code class="language-plaintext highlighter-rouge">ErrorCode</code> Class</span><a href="#defining-the-errorcode-class" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p>The initial step in constructing our error-handling framework involves defining an <code class="language-plaintext highlighter-rouge">ErrorCode</code> class. This class will represent various types of errors that may occur and will provide a mechanism to retrieve an error message associated with each error type.</p>

<p>Here is the basic structure of the <code class="language-plaintext highlighter-rouge">ErrorCode</code> class:</p>

<pre><code class="language-cpp">// ErrorCode class to represent possible errors
class ErrorCode {
 public:
    // Enum to define different types of error codes
    enum Code { None, ValueError, SyntaxError };

    // Constructor takes an optional error code and an error message
    explicit ErrorCode(Code code = None, std::string message = "")
        : code_(code), message_(std::move(message)) {}

    // Getter for the error message
    std::string message() const { return message_; }

    // Getter for the error code
    Code code() const { return code_; }

 private:
    Code code_;                ///&lt; error code / type
    std::string message_;      ///&lt; error message
};
</code></pre>

<p>In this structure:</p>

<ul>
  <li><strong>Enum <code class="language-plaintext highlighter-rouge">Code</code></strong>: Enumerates different error types (<code class="language-plaintext highlighter-rouge">None</code>, <code class="language-plaintext highlighter-rouge">ValueError</code>, <code class="language-plaintext highlighter-rouge">SyntaxError</code>).</li>
  <li><strong>Constructor</strong>: Initializes the error code and its associated message.</li>
  <li><strong>Getters</strong>: Provide access to the error code and message.</li>
</ul>

<p>This class forms the foundation for representing errors within our application.</p>

<h4 id="creating-the-result-class-template">6.3.2. <span class="me-2">Creating the <code class="language-plaintext highlighter-rouge">Result</code> Class Template</span><a href="#creating-the-result-class-template" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p>Next, we need a way to return either a valid result or an error from a function. To achieve this, we create a <code class="language-plaintext highlighter-rouge">Result</code> class template that can hold either a value of any type <code class="language-plaintext highlighter-rouge">T</code> or an <code class="language-plaintext highlighter-rouge">ErrorCode</code>.</p>

<p>The <code class="language-plaintext highlighter-rouge">Result</code> class is defined as a template, allowing it to accommodate any data type as the potential result of an operation. This flexibility is crucial for creating a general-purpose error-handling mechanism.</p>

<pre><code class="language-cpp">template &lt;typename T&gt;
class Result {
    // Class members and methods will be defined within this template.
};
</code></pre>

<p>By templating the class, we enable <code class="language-plaintext highlighter-rouge">Result</code> to handle various types of results, making it adaptable to different contexts within an application.</p>

<p>The <code class="language-plaintext highlighter-rouge">Result</code> class is designed to accommodate two primary scenarios:</p>

<ol>
  <li>The operation succeeds and returns a value, or</li>
  <li>The operation fails and returns an error.</li>
</ol>

<p>To facilitate these scenarios, the class provides two constructors.</p>

<pre><code class="language-cpp">public:
    // Constructor for a successful result containing a value
    explicit Result(T value) : result_(std::move(value)) {}

    // Constructor for an error result containing an ErrorCode
    Result(ErrorCode error) : result_(std::move(error)) {}
</code></pre>

<ul>
  <li>
    <p><strong>Success Constructor</strong>: This constructor initializes the <code class="language-plaintext highlighter-rouge">Result</code> object with a value of type <code class="language-plaintext highlighter-rouge">T</code>. The use of <code class="language-plaintext highlighter-rouge">std::move</code> ensures efficient handling of the value, particularly when dealing with large or complex objects.</p>
  </li>
  <li>
    <p><strong>Error Constructor</strong>: This constructor initializes the <code class="language-plaintext highlighter-rouge">Result</code> object with an <code class="language-plaintext highlighter-rouge">ErrorCode</code>, signifying that the operation encountered an issue.</p>
  </li>
</ul>

<p>These constructors are fundamental to ensuring that the <code class="language-plaintext highlighter-rouge">Result</code> object can accurately represent either a successful outcome or an error, providing a clear and structured approach to error handling.</p>

<p>To enable the <code class="language-plaintext highlighter-rouge">Result</code> object to hold either a value or an error, the class employs <code class="language-plaintext highlighter-rouge">std::variant</code>. This C++ standard library feature ensures that the object can store one of these types at a time, but not both simultaneously.</p>

<pre><code class="language-cpp">private:
    std::variant&lt;T, ErrorCode&gt; result_; ///&lt; Holds either a value of type T or an ErrorCode
</code></pre>

<p>The <code class="language-plaintext highlighter-rouge">std::variant</code> type is integral to the design of the <code class="language-plaintext highlighter-rouge">Result</code> class. It enforces type safety by ensuring that the object contains only a value or an error at any given moment, thus preventing ambiguous states.</p>

<p>A common requirement when dealing with the outcome of an operation is the ability to easily determine whether it succeeded or failed. The <code class="language-plaintext highlighter-rouge">Result</code> class provides an overloaded <code class="language-plaintext highlighter-rouge">bool</code> operator to facilitate this check.</p>

<pre><code class="language-cpp">public:
    // Overloaded bool operator to check if the result contains a value (indicating success)
    explicit operator bool() const {
        return std::holds_alternative&lt;T&gt;(result_);
    }
</code></pre>

<ul>
  <li><strong>Boolean Operator</strong>: This operator checks whether the <code class="language-plaintext highlighter-rouge">Result</code> contains a value of type <code class="language-plaintext highlighter-rouge">T</code>. If it does, the operator returns <code class="language-plaintext highlighter-rouge">true</code>, indicating success; otherwise, it returns <code class="language-plaintext highlighter-rouge">false</code>.</li>
</ul>

<p>This feature enhances the usability of the <code class="language-plaintext highlighter-rouge">Result</code> class by allowing developers to intuitively and efficiently check the success of an operation.</p>

<p>To access the value or error contained within the <code class="language-plaintext highlighter-rouge">Result</code> object, the class provides two methods: <code class="language-plaintext highlighter-rouge">value()</code> and <code class="language-plaintext highlighter-rouge">error()</code>. These methods return <code class="language-plaintext highlighter-rouge">std::optional</code> types, which offer a safe way to handle cases where the requested data might not be present.</p>

<pre><code class="language-cpp">public:
    // Retrieve the value if no error occurred, returning std::optional to handle the absence of a value
    std::optional&lt;T&gt; value() const {
        if (std::holds_alternative&lt;T&gt;(result_)) {
            return std::get&lt;T&gt;(result_);
        }
        return std::nullopt;
    }

    // Retrieve the error if one occurred, returning std::optional to handle the absence of an error
    std::optional&lt;ErrorCode&gt; error() const {
        if (std::holds_alternative&lt;ErrorCode&gt;(result_)) {
            return std::get&lt;ErrorCode&gt;(result_);
        }
        return std::nullopt;
    }
</code></pre>

<ul>
  <li>
    <p><strong><code class="language-plaintext highlighter-rouge">value()</code> Method</strong>: This method attempts to retrieve the stored value. If the <code class="language-plaintext highlighter-rouge">Result</code> contains a value, it is returned; if the <code class="language-plaintext highlighter-rouge">Result</code> contains an error, the method returns <code class="language-plaintext highlighter-rouge">std::nullopt</code>, indicating the absence of a value.</p>
  </li>
  <li>
    <p><strong><code class="language-plaintext highlighter-rouge">error()</code> Method</strong>: Similarly, this method retrieves the stored error if one is present. If the <code class="language-plaintext highlighter-rouge">Result</code> contains a value instead, it returns <code class="language-plaintext highlighter-rouge">std::nullopt</code>, signifying the absence of an error.</p>
  </li>
</ul>

<p>These methods provide a clear and safe mechanism for extracting the contents of the <code class="language-plaintext highlighter-rouge">Result</code> object, ensuring that error handling is both explicit and reliable.</p>

<p>The <code class="language-plaintext highlighter-rouge">Result</code> class template offers a comprehensive and type-safe mechanism for managing the outcomes of operations that may either succeed or fail. By encapsulating both the value and the error within a single object, it presents a clean and efficient alternative to traditional error-handling strategies, making it particularly suitable for environments where reliability and performance are critical.</p>

<h4 id="implementing-the-result-class-in-a-function">6.3.3. <span class="me-2">Implementing the <code class="language-plaintext highlighter-rouge">Result</code> Class in a Function</span><a href="#implementing-the-result-class-in-a-function" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p>With the <code class="language-plaintext highlighter-rouge">ErrorCode</code> and <code class="language-plaintext highlighter-rouge">Result</code> classes defined, we can now use them in a function that performs a potentially risky operation. The function will return a <code class="language-plaintext highlighter-rouge">Result&lt;int&gt;</code> to indicate either a successful operation (yielding a result) or an error.</p>

<p>Here’s an example of such a function:</p>

<pre><code class="language-cpp">Result&lt;int&gt; riskyFunction(int value) {

    // If the input value is negative, return a ValueError
    if (value &lt; 0) {
        return ErrorCode(ErrorCode::ValueError, "Value cannot be negative");
    }

    // If the input value is zero, return a SyntaxError
    if (value == 0) {
        return ErrorCode(ErrorCode::SyntaxError, "Value cannot be zero");
    }

    // Input is correct
    return Result&lt;int&gt;(value * 2); // Return the result on success
}
</code></pre>

<p>where</p>

<ul>
  <li><strong>Negative Value</strong>: Returns an <code class="language-plaintext highlighter-rouge">ErrorCode</code> for a <code class="language-plaintext highlighter-rouge">ValueError</code>.</li>
  <li><strong>Zero Value</strong>: Returns an <code class="language-plaintext highlighter-rouge">ErrorCode</code> for a <code class="language-plaintext highlighter-rouge">SyntaxError</code>.</li>
  <li><strong>Valid Value</strong>: Returns the computed result (<code class="language-plaintext highlighter-rouge">value * 2</code>).</li>
</ul>

<p>This function demonstrates how to use the <code class="language-plaintext highlighter-rouge">Result</code> and <code class="language-plaintext highlighter-rouge">ErrorCode</code> classes to handle errors in a structured manner.</p>

<h4 id="managing-the-result-in-the-main-function">6.3.4. <span class="me-2">Managing the Result in the Main Function</span><a href="#managing-the-result-in-the-main-function" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p>Finally, we can handle the result of <code class="language-plaintext highlighter-rouge">riskyFunction</code> in the <code class="language-plaintext highlighter-rouge">main</code> function:</p>

<pre><code class="language-cpp">int main() {
    // Call riskyFunction with an input value of 5
    auto result = riskyFunction(5);

    // Check if the result contains an error
    if (!result) {
        // Retrieve the error from the result
        auto error = result.error();

        // Check if the error is a ValueError and print the error message
        if (error &amp;&amp; error-&gt;code() == ErrorCode::ValueError) {
            std::cout &lt;&lt; "Value Error: " &lt;&lt; error-&gt;message() &lt;&lt; "\n";
            exit(0); // or return
        }

        // Check if the error is a SyntaxError and print the error message
        if (error &amp;&amp; error-&gt;code() == ErrorCode::SyntaxError) {
            std::cout &lt;&lt; "Syntax Error: " &lt;&lt; error-&gt;message() &lt;&lt; "\n";
            exit(0); // or return
        }
    } 

    // print the successful result value
    std::cout &lt;&lt; "Result: " &lt;&lt; *result.value() &lt;&lt; "\n";

    return 0;
}
</code></pre>

<p>where</p>

<ul>
  <li><strong>Check for Error</strong>: The <code class="language-plaintext highlighter-rouge">if (!result)</code> block checks if an error occurred.</li>
  <li><strong>Handle ValueError</strong>: If the error is a <code class="language-plaintext highlighter-rouge">ValueError</code>, print the message and exit.</li>
  <li><strong>Handle SyntaxError</strong>: If the error is a <code class="language-plaintext highlighter-rouge">SyntaxError</code>, print the message and exit.</li>
  <li><strong>Print Result</strong>: If no error occurred, print the result.</li>
</ul>

<p>This approach is particularly advantageous in environments where exceptions are disabled or in performance-critical applications where the overhead of exceptions is undesirable. The combination of <code class="language-plaintext highlighter-rouge">std::variant</code>, <code class="language-plaintext highlighter-rouge">std::optional</code>, and custom error codes provides a robust alternative that enhances both code readability and maintainability.</p>

<h2 id="conclusion">7. <span class="me-2">Conclusion</span><a href="#conclusion" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>In the highly specialized field of embedded systems development, where resources are tightly constrained, the use of traditional C++ exceptions is often impractical. By adopting alternative techniques such as low-level <code class="language-plaintext highlighter-rouge">goto</code> and function pointers, or more sophisticated methods like <code class="language-plaintext highlighter-rouge">setjmp</code> and <code class="language-plaintext highlighter-rouge">longjmp</code>, developers can implement effective error-handling mechanisms with minimal overhead. Each approach has its advantages and trade-offs, which must be carefully evaluated based on the specific constraints and requirements of the application at hand.</p>

<p>For a quick recap, here is a comparison between discussed methods:</p>

<div class="table-wrapper"><table>
  <thead>
    <tr>
      <th><strong>Method</strong></th>
      <th><strong>Advantages</strong></th>
      <th><strong>Disadvantages</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong><code class="language-plaintext highlighter-rouge">goto</code> and Function Pointers</strong></td>
      <td>- Extremely low overhead, close to the hardware level  <br />- Simple to implement in small, constrained environments</td>
      <td>- Prone to errors and difficult to maintain  <br />- Lacks flexibility and scalability  <br />- No automatic cleanup</td>
    </tr>
    <tr>
      <td><strong><code class="language-plaintext highlighter-rouge">setjmp</code> and <code class="language-plaintext highlighter-rouge">longjmp</code></strong></td>
      <td>- Provides a mechanism for non-local jumps and structured error handling without exceptions  <br />- Suitable for more complex control flows</td>
      <td>- Requires manual resource management (no stack unwinding)  <br />- Can be complex to implement correctly</td>
    </tr>
    <tr>
      <td><strong>Typed Exceptions with <code class="language-plaintext highlighter-rouge">longjmp</code></strong></td>
      <td>- Allows handling different types of errors distinctly  <br />- Offers more granularity in error management</td>
      <td>- Complexity in implementation  <br />- Manual resource management required</td>
    </tr>
    <tr>
      <td><strong>Exception Cascades with <code class="language-plaintext highlighter-rouge">longjmp</code></strong></td>
      <td>- Enables complex control flow and exception propagation  <br />- Flexible error-handling strategy</td>
      <td>- Even higher complexity  <br />- Difficult to debug and maintain  <br />- Requires thorough testing and validation</td>
    </tr>
    <tr>
      <td><strong>Custom Exception Handler</strong></td>
      <td>- Mimics higher-level <code class="language-plaintext highlighter-rouge">try/catch</code> behavior in embedded C/C++ without runtime overhead<br />- More structured and organized error handling</td>
      <td>- Increased complexity  <br />- Requires manual resource registration and cleanup  <br />- Potential for missed cleanup</td>
    </tr>
    <tr>
      <td><strong><code class="language-plaintext highlighter-rouge">goto</code> for Cleanup</strong></td>
      <td>- Simple and straightforward for resource cleanup  <br />- Simplifies resource cleanup operations in basic scenarios</td>
      <td>- Lacks abstraction and safety  <br />- Can lead to spaghetti code and is unsuitable for complex error handling<br /></td>
    </tr>
    <tr>
      <td>Raw <code class="language-plaintext highlighter-rouge">std::optional</code> and <code class="language-plaintext highlighter-rouge">std::variant</code></td>
      <td>- Modern C++ features with low overhead, compatible with resource-constrained environments  <br />- Type-safe and integrates well with existing codebases<br /><br /></td>
      <td>- Limited expressiveness compared to full exception handling  <br />- Still requires manual checks and error handling</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Result</code> Class Template</td>
      <td>- Encapsulates error handling in a type-safe manner  <br />- Provides clear and maintainable code structure  <br />- Avoids the runtime overhead of exceptions</td>
      <td>- Increased code complexity  <br />- May be over-engineered for simple error-handling cases</td>
    </tr>
  </tbody>
</table></div>

<p>In conclusion, there is no one-size-fits-all solution for error handling in embedded systems. The best approach often involves a careful balance between simplicity, efficiency, and flexibility, tailored to the unique challenges of the target environment. By leveraging the techniques discussed in this article, developers can ensure that their embedded systems remain resilient, even in the face of unexpected errors.</p>

  </div>

  <div class="post-tail-wrapper text-muted">
    <!-- categories -->
    
      <div class="post-meta mb-3">
        <i class="far fa-folder-open fa-fw me-1"></i>
        
          <a href="/categories/embedded-development/">Embedded-Development</a>,
          <a href="/categories/software-designs/">Software-Designs</a>,
          <a href="/categories/error/">Error</a>,
          <a href="/categories/handling/">Handling</a>
      </div>
    

    <!-- tags -->
    
      <div class="post-tags">
        <i class="fa fa-tags fa-fw me-1"></i>
        
          <a
            href="/tags/embedded/"
            class="post-tag no-text-decoration"
          >Embedded</a>
        
          <a
            href="/tags/stm32/"
            class="post-tag no-text-decoration"
          >STM32</a>
        
          <a
            href="/tags/error-handling/"
            class="post-tag no-text-decoration"
          >Error-Handling</a>
        
          <a
            href="/tags/exception-handling/"
            class="post-tag no-text-decoration"
          >Exception-Handling</a>
        
          <a
            href="/tags/resource-optimization/"
            class="post-tag no-text-decoration"
          >Resource Optimization</a>
        
          <a
            href="/tags/setjmp/"
            class="post-tag no-text-decoration"
          >setjmp</a>
        
          <a
            href="/tags/jump/"
            class="post-tag no-text-decoration"
          >jump</a>
        
          <a
            href="/tags/goto/"
            class="post-tag no-text-decoration"
          >goto</a>
        
          <a
            href="/tags/longjump/"
            class="post-tag no-text-decoration"
          >longjump</a>
        
          <a
            href="/tags/low-level-programming/"
            class="post-tag no-text-decoration"
          >Low-Level Programming</a>
        
          <a
            href="/tags/arm/"
            class="post-tag no-text-decoration"
          >ARM</a>
        
          <a
            href="/tags/c/"
            class="post-tag no-text-decoration"
          >C++</a>
        
      </div>
    

    <div
      class="
        post-tail-bottom
        d-flex justify-content-between align-items-center mt-5 pb-2
      "
    >
      <div class="license-wrapper">
        
          

          This post is licensed under 
        <a href="https://creativecommons.org/licenses/by/4.0/">
          CC BY 4.0
        </a>
         by the author.
        
      </div>

      <!-- Post sharing snippet -->

<div class="share-wrapper d-flex align-items-center">
  <span class="share-label text-muted">Share</span>
  <span class="share-icons">
    
    
    

    

    <button
      id="copy-link"
      aria-label="Copy link"
      class="btn small"
      data-bs-toggle="tooltip"
      data-bs-placement="top"
      title="Copy link"
      data-title-succeed="Link copied successfully!"
    >
      <i class="fa-fw fas fa-link pe-none fs-6"></i>
    </button>
  </span>
</div>

    </div>
    <!-- .post-tail-bottom -->
  </div>
  <!-- div.post-tail-wrapper -->
</article>


            
          </main>

          <!-- panel -->
          <aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 mb-5 text-muted">
            <div class="access">
              <!-- Get 5 last posted/updated posts -->














  <section id="access-lastmod">
    <h2 class="panel-heading">Recently Updated</h2>
    <ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2">
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/CPP-Coroutines/">C++20 - Coroutines</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/Exploring-Exception-Handling-Mechanisms-in-Embedded-Environments/">Efficient Exception Handling in Resource-Constrained Embedded Systems</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/CMake-Production/">CMake - Publish Your Own Library</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/CMake-Integrating-C++-Libraries/">CMake - Integrating C++ Libraries</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/CMake-On-Windows/">CMake - Installation On Windows</a>
        </li>
      
    </ul>
  </section>
  <!-- #access-lastmod -->


              <!-- The trending tags list -->















  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
      
        
        



  <section>
    <h2 class="panel-heading">Trending Tags</h2>
    <div class="d-flex flex-wrap mt-3 mb-1 me-3">
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/c/">C++</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/software/">Software</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/cmake/">Cmake</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/windows/">Windows</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/arm/">ARM</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/embedded/">Embedded</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/stm32/">STM32</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/blackpill/">blackpill</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/build-systems/">Build-Systems</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/c-20/">C++20</a>
      
    </div>
  </section>


            </div>

            
              
              



  <section id="toc-wrapper" class="d-none ps-0 pe-4">
    <h2 class="panel-heading ps-3 mb-2">Contents</h2>
    <nav id="toc"></nav>
  </section>


            
          </aside>
        </div>

        <div class="row">
          <!-- tail -->
          <div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              
              <!-- Recommend the other 3 posts according to the tags and categories of the current post. -->

<!-- The total size of related posts -->


<!-- An random integer that bigger than 0 -->


<!-- Equals to TAG_SCORE / {max_categories_hierarchy} -->















  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
    










  <aside id="related-posts" aria-labelledby="related-label">
    <h3 class="mb-4" id="related-label">Further Reading</h3>
    <nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4">
      
        <article class="col">
          <a href="/posts/BlackPill-STM32F411CEU6/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1684323660"
  data-df="ll"
  
>
  May 17, 2023
</time>

              <h4 class="pt-0 my-2">The Black Pill (STM32F411CEU6)</h4>
              <div class="text-muted">
                <p>&amp;lt;p&amp;gt;&amp;lt;img src=&quot;https://i0.wp.com/github.com/WeActStudio/WeActStudio.MiniSTM32F4x1/raw/master/images/STM32F4x1-V30_3D.jpg?ssl=1&quot; alt=&quot;Description of the image&quot; style=&quot;float: right; margin-rig...</p>
              </div>
            </div>
          </a>
        </article>
      
        <article class="col">
          <a href="/posts/CPP-Coroutines/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1705955640"
  data-df="ll"
  
>
  Jan 22, 2024
</time>

              <h4 class="pt-0 my-2">C++20 - Coroutines</h4>
              <div class="text-muted">
                <p>Coroutines, introduced in C++20, bring a powerful mechanism for handling asynchronous operations, generators and cooperative multitasking.
Unlike conventional functions, which execute sequentially ...</p>
              </div>
            </div>
          </a>
        </article>
      
        <article class="col">
          <a href="/posts/CMake-Production/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1700308800"
  data-df="ll"
  
>
  Nov 18, 2023
</time>

              <h4 class="pt-0 my-2">CMake - Publish Your Own Library</h4>
              <div class="text-muted">
                <p>Introduction to Publishing CMake Projects

When developing a C++ library, especially one meant to be reused across multiple projects or distributed to others, it’s crucial to structure your project...</p>
              </div>
            </div>
          </a>
        </article>
      
    </nav>
  </aside>
  <!-- #related-posts -->


            
              
              <!-- Navigation buttons at the bottom of the post. -->

<nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation">
  
  

  
    <a
      href="/posts/CMake-Production/"
      class="btn btn-outline-primary"
      aria-label="Older"
    >
      <p>CMake - Publish Your Own Library</p>
    </a>
  

  
    <a
      href="/posts/CPP-Coroutines/"
      class="btn btn-outline-primary"
      aria-label="Newer"
    >
      <p>C++20 - Coroutines</p>
    </a>
  
</nav>

            
              
              <!-- The comments switcher -->


            

            <!-- The Footer -->

<footer
  aria-label="Site Info"
  class="
    d-flex flex-column justify-content-center text-muted
    flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3
  "
>
  <p>©
    <time>2024</time>

    
      <a href="https://github.com/mustafaalotbah">Mustafa Alotbah</a>.
    

    
      <span
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author."
      >Some rights reserved.</span>
    
  </p>

  <p>Using the <a
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="v7.0.1"
        href="https://github.com/cotes2020/jekyll-theme-chirpy"
        target="_blank"
        rel="noopener"
      >Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>.
  </p>
</footer>

          </div>
        </div>

        <!-- The Search results -->

<div id="search-result-wrapper" class="d-flex justify-content-center d-none">
  <div class="col-11 content">
    <div id="search-hints">
      <!-- The trending tags list -->















  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
      
        
        



  <section>
    <h2 class="panel-heading">Trending Tags</h2>
    <div class="d-flex flex-wrap mt-3 mb-1 me-3">
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/c/">C++</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/software/">Software</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/cmake/">Cmake</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/windows/">Windows</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/arm/">ARM</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/embedded/">Embedded</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/stm32/">STM32</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/blackpill/">blackpill</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/build-systems/">Build-Systems</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/c-20/">C++20</a>
      
    </div>
  </section>


    </div>
    <div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div>
  </div>
</div>

      </div>

      <aside aria-label="Scroll to Top">
        <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow">
          <i class="fas fa-angle-up"></i>
        </button>
      </aside>
    </div>

    <div id="mask"></div>

    
      <aside
  id="notification"
  class="toast"
  role="alert"
  aria-live="assertive"
  aria-atomic="true"
  data-bs-animation="true"
  data-bs-autohide="false"
>
  <div class="toast-header">
    <button
      type="button"
      class="btn-close ms-auto"
      data-bs-dismiss="toast"
      aria-label="Close"
    ></button>
  </div>
  <div class="toast-body text-center pt-0">
    <p class="px-2 mb-3">A new version of content is available.</p>
    <button type="button" class="btn btn-primary" aria-label="Update">
      Update
    </button>
  </div>
</aside>

    

    <!-- JavaScripts -->
    <!-- JS selector for site. -->

<!-- commons -->



<!-- layout specified -->




  

  
    <!-- image lazy-loading & popup & clipboard -->
    
  















  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  



  <script src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.11/dayjs.min.js,npm/dayjs@1.11.11/locale/en.min.js,npm/dayjs@1.11.11/plugin/relativeTime.min.js,npm/dayjs@1.11.11/plugin/localizedFormat.min.js,npm/tocbot@4.27.20/dist/tocbot.min.js"></script>






<script src="/assets/js/dist/post.min.js"></script>



<!-- Pageviews -->

  

  







    <!--
  Jekyll Simple Search loader
  See: <https://github.com/christian-fei/Simple-Jekyll-Search>
-->





<script>SimpleJekyllSearch({
    searchInput: document.getElementById('search-input'),
    resultsContainer: document.getElementById('search-results'),
    json: '/assets/js/data/search.json',
    searchResultTemplate: '  <article class="px-1 px-sm-2 px-lg-4 px-xl-0">    <header>      <h2>8. <a href="{url}">{title}</a></h2>      <div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1">        {categories}        {tags}      </div>    </header>    <p>{snippet}</p>  </article>',
    noResultsText: '<p class="mt-5">Oops! No results found.</p>',
    templateMiddleware: function(prop, value, template) {
      if (prop === 'categories') {
        if (value === '') {
          return `${value}`;
        } else {
          return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`;
        }
      }

      if (prop === 'tags') {
        if (value === '') {
          return `${value}`;
        } else {
          return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`;
        }
      }
    }
  });
</script>


  </body>
</html>
