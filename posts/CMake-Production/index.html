<!doctype html>














<!-- `site.alt_lang` can specify a language different from the UI -->
<html lang="en" >
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7">
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta
    name="viewport"
    content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover"
  ><!-- Setup Open Graph image -->

  

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v4.3.3" />
<meta property="og:title" content="CMake - Publish Your Own Library" />
<meta property="og:locale" content="en" />
<meta name="description" content="Introduction to Publishing CMake Projects" />
<meta property="og:description" content="Introduction to Publishing CMake Projects" />
<link rel="canonical" href="http://localhost:4000/posts/CMake-Production/" />
<meta property="og:url" content="http://localhost:4000/posts/CMake-Production/" />
<meta property="og:site_name" content="Mustafa Alotbah’s Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2023-11-18T13:00:00+01:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="CMake - Publish Your Own Library" />
<meta name="twitter:site" content="@" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-11-18T13:00:00+01:00","datePublished":"2023-11-18T13:00:00+01:00","description":"Introduction to Publishing CMake Projects","headline":"CMake - Publish Your Own Library","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/posts/CMake-Production/"},"url":"http://localhost:4000/posts/CMake-Production/"}</script>
<!-- End Jekyll SEO tag -->


  <title>CMake - Publish Your Own Library | Mustafa Alotbah's Blog
  </title>

  <!--
  The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps
  Generated by: https://realfavicongenerator.net/
-->



<link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png">

  <link rel="manifest" href="/assets/img/favicons/site.webmanifest">

<link rel="shortcut icon" href="/assets/img/favicons/favicon.ico">
<meta name="apple-mobile-web-app-title" content="Mustafa Alotbah's Blog">
<meta name="application-name" content="Mustafa Alotbah's Blog">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml">
<meta name="theme-color" content="#ffffff">


  <!-- Resource Hints -->
  
    
      
        <link rel="preconnect" href="https://fonts.googleapis.com" >
      
        <link rel="dns-prefetch" href="https://fonts.googleapis.com" >
      
    
      
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      
        <link rel="dns-prefetch" href="https://fonts.gstatic.com" >
      
    
      
        <link rel="preconnect" href="https://cdn.jsdelivr.net" >
      
        <link rel="dns-prefetch" href="https://cdn.jsdelivr.net" >
      
    
  

  <!-- Bootstrap -->
  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
  

  <!-- Theme style -->
  <link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css">

  <!-- Web Font -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap">

  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.2/css/all.min.css">

  <!-- 3rd-party Dependencies -->

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.27.20/dist/tocbot.min.css">
  

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css">
  

  
    <!-- Image Popup -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css">
  

  <!-- JavaScript -->

  
    <!-- Switch the mode between dark and light. -->

<script type="text/javascript">
  class ModeToggle {
    static get MODE_KEY() {
      return 'mode';
    }
    static get MODE_ATTR() {
      return 'data-mode';
    }
    static get DARK_MODE() {
      return 'dark';
    }
    static get LIGHT_MODE() {
      return 'light';
    }
    static get ID() {
      return 'mode-toggle';
    }

    constructor() {
      let self = this;this.sysDarkPrefers.addEventListener('change', () => {
        if (self.hasMode) {
          self.clearMode();
        }
        self.notify();
      });

      if (!this.hasMode) {
        return;
      }

      if (this.isDarkMode) {
        this.setDark();
      } else {
        this.setLight();
      }
    }

    get sysDarkPrefers() {
      return window.matchMedia('(prefers-color-scheme: dark)');
    }

    get isPreferDark() {
      return this.sysDarkPrefers.matches;
    }

    get isDarkMode() {
      return this.mode === ModeToggle.DARK_MODE;
    }

    get hasMode() {
      return this.mode != null;
    }

    get mode() {
      return sessionStorage.getItem(ModeToggle.MODE_KEY);
    }get modeStatus() {
      if (this.hasMode) {
        return this.mode;
      } else {
        return this.isPreferDark ? ModeToggle.DARK_MODE : ModeToggle.LIGHT_MODE;
      }
    }

    setDark() {
      document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE);
      sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE);
    }

    setLight() {
      document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE);
      sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE);
    }

    clearMode() {
      document.documentElement.removeAttribute(ModeToggle.MODE_ATTR);
      sessionStorage.removeItem(ModeToggle.MODE_KEY);
    }notify() {
      window.postMessage(
        {
          direction: ModeToggle.ID,
          message: this.modeStatus
        },
        '*'
      );
    }

    flipMode() {
      if (this.hasMode) {
        this.clearMode();
      } else {
        if (this.isPreferDark) {
          this.setLight();
        } else {
          this.setDark();
        }
      }

      this.notify();
    }
  }

  const modeToggle = new ModeToggle();
</script>

  

  <!-- A placeholder to allow defining custom metadata -->





<!-- Link to the GitHub Dark theme stylesheet -->
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css">
<!-- <link rel="stylesheet" href="path/to/your/custom-styles.css"> -->
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>

<!-- Include the Line Numbers Plugin JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlightjs-line-numbers.js/2.8.0/highlightjs-line-numbers.min.js"></script>


<!-- Initialize Highlight.js -->
<script>
  document.addEventListener('DOMContentLoaded', (event) => {
    hljs.highlightAll();
    hljs.initLineNumbersOnLoad();
  });
</script>

<!-- Override background color with inline styles -->
<style>
  .hljs {
    background: #151515 !important; /* Replace with your desired background color */
    border: 1px solid #444; /* Gray border */
    border-radius: 8px; /* Rounded corners */
    padding: 10px; /* Optional: Add some padding for better readability */
  }

  .hljs-ln-numbers {
    text-align: right !important;
    padding-right: 5px !important;
    user-select: none !important;
    opacity: 0.5 !important;
}

.hljs-ln-code {
    padding-left: 5px !important;
}
</style>

<script type="text/x-mathjax-config">
  MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\(', '\)']],
      displayMath: [['$$', '$$'], ['\[', '\]']]
    },
    options: {
      skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
  };
</script>
<script type="text/javascript" id="MathJax-script" async
        src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
</head>


  <body>
    <!-- The Side Bar -->

<aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end">
  <header class="profile-wrapper">
    <a href="/" id="avatar" class="rounded-circle"><img src="/assets/images/mustafa.png" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a>

    <h1 class="site-title">
      <a href="/">Mustafa Alotbah's Blog</a>
    </h1>
    <p class="site-subtitle fst-italic mb-0">A Computer Science dedicated blog.</p>
  </header>
  <!-- .profile-wrapper -->

  <nav class="flex-column flex-grow-1 w-100 ps-0">
    <ul class="nav">
      <!-- home -->
      <li class="nav-item">
        <a href="/" class="nav-link">
          <i class="fa-fw fas fa-home"></i>
          <span>HOME</span>
        </a>
      </li>
      <!-- the real tabs -->
      
        <li class="nav-item">
          <a href="/categories/" class="nav-link">
            <i class="fa-fw fas fa-stream"></i>
            

            <span>CATEGORIES</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/tags/" class="nav-link">
            <i class="fa-fw fas fa-tags"></i>
            

            <span>TAGS</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/archives/" class="nav-link">
            <i class="fa-fw fas fa-archive"></i>
            

            <span>ARCHIVES</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/about/" class="nav-link">
            <i class="fa-fw fas fa-info-circle"></i>
            

            <span>ABOUT</span>
          </a>
        </li>
        <!-- .nav-item -->
      
    </ul>
  </nav>

  <div class="sidebar-bottom d-flex flex-wrap  align-items-center w-100">
    
      <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle">
        <i class="fas fa-adjust"></i>
      </button>

      
        <span class="icon-border"></span>
      
    

    
      

      
        <a
          href="https://github.com/mustafaalotbah"
          aria-label="github"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fab fa-github"></i>
        </a>
      
    
      

      
        <a
          href="javascript:location.href = 'mailto:' + ['mustafa.alotbah','gmail.com'].join('@')"
          aria-label="email"
          

          

          

          
        >
          <i class="fas fa-envelope"></i>
        </a>
      
    
      

      
        <a
          href="/feed.xml"
          aria-label="rss"
          

          

          

          
        >
          <i class="fas fa-rss"></i>
        </a>
      
    
      

      
        <a
          href="https://www.linkedin.com/in/mustafa-alotbah-41211513b/"
          aria-label="linkedin"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fab fa-linkedin"></i>
        </a>
      
    
  </div>
  <!-- .sidebar-bottom -->
</aside>
<!-- #sidebar -->


    <div id="main-wrapper" class="d-flex justify-content-center">
      <div class="container d-flex flex-column px-xxl-5">
        <!-- The Top Bar -->

<header id="topbar-wrapper" aria-label="Top Bar">
  <div
    id="topbar"
    class="d-flex align-items-center justify-content-between px-lg-3 h-100"
  >
    <nav id="breadcrumb" aria-label="Breadcrumb">
      

      
        
          
            <span>
              <a href="/">Home</a>
            </span>

          
        
          
        
          
            
              <span>CMake - Publish Your Own Library</span>
            

          
        
      
    </nav>
    <!-- endof #breadcrumb -->

    <button type="button" id="sidebar-trigger" class="btn btn-link">
      <i class="fas fa-bars fa-fw"></i>
    </button>

    <div id="topbar-title">
      Post
    </div>

    <button type="button" id="search-trigger" class="btn btn-link">
      <i class="fas fa-search fa-fw"></i>
    </button>

    <search id="search" class="align-items-center ms-3 ms-lg-0">
      <i class="fas fa-search fa-fw"></i>
      <input
        class="form-control"
        id="search-input"
        type="search"
        aria-label="search"
        autocomplete="off"
        placeholder="Search..."
      >
    </search>
    <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button>
  </div>
</header>


        <div class="row flex-grow-1">
          <main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              <!-- Refactor the HTML structure -->



<!--
  In order to allow a wide table to scroll horizontally,
  we suround the markdown table with `<div class="table-wrapper">` and `</div>`
-->



<!--
  Fixed kramdown code highlight rendering:
  https://github.com/penibelst/jekyll-compress-html/issues/101
  https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901
-->



<!-- Change the icon of checkbox -->



<!-- Handle images -->





<!-- Add header for code snippets -->



<!-- Create heading anchors -->





  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  




<!-- return -->




<article class="px-1">
  <header>
    <h1 data-toc-skip>CMake - Publish Your Own Library</h1>
    

    <div class="post-meta text-muted">
      <!-- published date -->
      <span>
        Posted
        <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1700308800"
  data-df="ll"
  
    data-bs-toggle="tooltip" data-bs-placement="bottom"
  
>
  Nov 18, 2023
</time>

      </span>

      <!-- lastmod date -->
      

      

      <div class="d-flex justify-content-between">
        <!-- author(s) -->
        <span>
          

          By

          <em>
            
              <a href="https://github.com/mustafaalotbah">Mustafa Alotbah</a>
            
          </em>
        </span>

        <div>
          <!-- pageviews -->
          

          <!-- read time -->
          <!-- Calculate the post's reading time, and display the word count in tooltip -->



<!-- words per minute -->










<!-- return element -->
<span
  class="readtime"
  data-bs-toggle="tooltip"
  data-bs-placement="bottom"
  title="4036 words"
>
  <em>22 min</em> read</span>

        </div>
      </div>
    </div>
  </header>

  <div class="content">
    <h2 id="introduction-to-publishing-cmake-projects">1. <span class="me-2">Introduction to Publishing CMake Projects</span><a href="#introduction-to-publishing-cmake-projects" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>When developing a C++ library, especially one meant to be reused across multiple projects or distributed to others, it’s crucial to structure your project effectively and use a build system that facilitates this process. CMake is a powerful and widely-used build system that helps manage the build process in a platform-independent manner. This tutorial will guide you through the process of structuring and publishing your own CMake project, ensuring that your library is not only well-organized but also easy to build, test, and distribute.</p>

<p>CMake projects are organized to streamline the development process, allowing for easy integration of dependencies, consistent build processes across different platforms, and a clear separation between the public API, private code, and other components like tests. By following a well-defined structure, you make your project more maintainable and accessible to other developers, who can easily understand and contribute to your code.</p>

<h2 id="objectives">2. <span class="me-2">Objectives</span><a href="#objectives" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>The primary objective of this article is to provide a comprehensive guide on setting up a CMake-based C++ project for public release. We will cover essential topics such as project structure, CMake configuration, handling platform-specific dependencies, and defining installation rules. By the end of this guide, you will be equipped to publish a well-organized, portable, and easily integrable library.</p>

<p>However, this guide will focus on the CMake configuration and project structuring aspects, rather than delving deeply into the testing or the internal implementation of the library itself. Testing will be mentioned briefly, but the core emphasis will be on preparing your library for public consumption through CMake.</p>

<h2 id="project-structure-overview">3. <span class="me-2">Project Structure Overview</span><a href="#project-structure-overview" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>The structure of a CMake project plays a significant role in how easily it can be built, tested, and integrated into other projects. A well-organized project directory helps in separating different concerns such as public headers, source files, dependencies, and configuration files. Below is a typical structure for a CMake-based C++ project, which we will dissect:</p>

<pre><code class="language-bash">my_library_project/                # Project Folder
│
├── CMakeLists.txt                 # Root CMake configuration file
├── cmake/
│   └── my_libraryConfig.cmake.in  # CMake config template for installation
│
├── dependencies/                  # External dependencies for different platforms
│   ├── win_x86_64/                # Dependencies for Windows x64
│   └── linux_x86_64/              # Dependencies for Linux x64
│
├── include/                       # Public header files exposed to users
│   └── my_library/                # Library-specific headers
│       ├── my_library.h           # Main public API header
│       └── my_project_export.h    # Export macros for DLLs/shared libraries
│
├── my_library/                    # Source code for the library
│   ├── CMakeLists.txt             # Module-specific CMake configuration
│   │
│   ├── internal/                  # Internal headers (not exposed to users)
│   │   └── internal_helpers.h     # Helpers and private interfaces
│   │
│   └── source/                    # Implementation files
│       ├── my_library.cpp         # Implementation of the public API
│       └── internal_helpers.cpp   # Implementation of internal functionality
│    
│
└── tests/                         # Test code for the library
    ├── CMakeLists.txt             # CMake Configuration for tests
    └── test_my_library.cpp        # Unit or integration tests
</code></pre>

<p>Breakdown of the Project Structure</p>

<ul>
  <li>
    <p><strong>CMakeLists.txt (Root Level):</strong></p>

    <p>This file serves as the entry point for CMake, defining the project’s configuration and build settings. It sets the required CMake version, specifies the C++ standard, configures platform-specific dependencies, and adjusts compiler flags based on the build type. The file also defines output directories and includes subdirectories for building the main library and associated tests. Additionally, it manages required packages and ensures compatibility across different platforms.</p>
  </li>
  <li>
    <p><strong>cmake/ Directory:</strong></p>

    <p>Contains custom CMake modules and configuration templates, such as <code class="language-plaintext highlighter-rouge">my_libraryConfig.cmake.in</code>, which is used for packaging and installing your library. This template allows users to find and link against your library using <code class="language-plaintext highlighter-rouge">find_package</code>.</p>
  </li>
  <li>
    <p><strong>dependencies/ Directory:</strong></p>

    <p>This is where you would store any external dependencies your project relies on, especially if they are platform-specific. Subdirectories can be organized by platform, such as <code class="language-plaintext highlighter-rouge">win_x86_64</code> for Windows and <code class="language-plaintext highlighter-rouge">linux_x86_64</code> for Linux. Including dependencies here makes it easier to manage third-party libraries that are not readily available through package managers.</p>
  </li>
  <li>
    <p><strong>include/ Directory:</strong></p>

    <p>This folder contains the public API headers. These are the files that other projects will include when they use your library. The headers are usually organized in a subdirectory named after your library (e.g., <code class="language-plaintext highlighter-rouge">my_library/</code>). The main API header (<code class="language-plaintext highlighter-rouge">my_library.h</code>) should include the core functions and classes, while the <code class="language-plaintext highlighter-rouge">my_project_export.h</code> file handles macro definitions that control symbol visibility, which is crucial when building shared libraries.</p>
  </li>
  <li>
    <p><strong>my_library/ Directory:</strong></p>

    <p>This is the main codebase of your library. It typically contains a <code class="language-plaintext highlighter-rouge">CMakeLists.txt</code> file if the module needs its own build rules, an <code class="language-plaintext highlighter-rouge">internal/</code> directory for private headers not exposed to users, and a <code class="language-plaintext highlighter-rouge">source/</code> directory for the implementation files (<code class="language-plaintext highlighter-rouge">.cpp</code>). This separation between internal and public components helps in encapsulating the internal details of your library.</p>
  </li>
  <li>
    <p><strong>tests/ Directory:</strong></p>

    <p>Contains unit or integration tests that validate your library’s functionality. These tests are usually written using a testing framework (like Google Test, Catch2, or Boost.Test) and should cover both the public API and critical internal components. The <code class="language-plaintext highlighter-rouge">test_my_library.cpp</code> file is an example test that might include various test cases to ensure your library works as expected. Here we will, however, focus on the project structure rather than on testing.</p>
  </li>
</ul>

<h2 id="root-cmakeliststxt">4. <span class="me-2">Root CMakeLists.txt</span><a href="#root-cmakeliststxt" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>The root <code class="language-plaintext highlighter-rouge">CMakeLists.txt</code> file is the cornerstone of your project’s build configuration. It defines the essential settings and directives that guide CMake in compiling, linking, and packaging your project. Writing a well-structured <code class="language-plaintext highlighter-rouge">CMakeLists.txt</code> ensures that your project is not only maintainable but also portable across different environments and platforms. Below is a detailed explanation of the key components of this file.</p>

<h3 id="minimum-cmake-version-and-project-definition">4.1. <span class="me-2">Minimum CMake Version and Project Definition</span><a href="#minimum-cmake-version-and-project-definition" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>To start, you must define the minimum version of CMake that is required to build your project, as well as the project name and version. This is not only a formality but also a fundamental part of your project’s identity.</p>

<pre><code class="language-cpp">cmake_minimum_required(VERSION 3.20)
project(my_library_project VERSION 0.1.0)
</code></pre>

<p>The <code class="language-plaintext highlighter-rouge">cmake_minimum_required</code> command specifies the minimum version of CMake that is required to build your project. This ensures that all developers and continuous integration systems use a compatible version of CMake, avoiding potential issues caused by deprecated or unavailable features in older versions. Here, version 3.20 is chosen to leverage modern CMake capabilities.</p>

<p>The <code class="language-plaintext highlighter-rouge">project</code> command defines the name of the project and its version. This is critical as it not only names your project but also associates a version number with it, which can be useful for packaging and version control purposes.</p>

<h3 id="c-standard-configuration">4.2. <span class="me-2">C++ Standard Configuration</span><a href="#c-standard-configuration" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>In a C++ project, it’s critical to enforce a specific C++ standard across all compiled files to ensure consistency and avoid compatibility issues between different compilers or environments.</p>

<pre><code class="language-py"># This specifies that the C++20 standard should be enforced for all targets.
set(CMAKE_CXX_STANDARD 20)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
set(CMAKE_CXX_EXTENSIONS OFF)
</code></pre>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">CMAKE_CXX_STANDARD</code> is set to <code class="language-plaintext highlighter-rouge">20</code>, which enforces the C++20 standard.</p>
  </li>
  <li>
    <p>The <code class="language-plaintext highlighter-rouge">CMAKE_CXX_STANDARD_REQUIRED</code> directive ensures that the build process will halt if the compiler does not support C++20, preventing potential issues later.</p>
  </li>
  <li>
    <p>Disabling <code class="language-plaintext highlighter-rouge">CMAKE_CXX_EXTENSIONS</code> avoids using compiler-specific language extensions, which enhances the portability of your code across different compilers.</p>
  </li>
</ul>

<h3 id="compiler-flags-based-on-build-type">4.3. <span class="me-2">Compiler Flags Based on Build Type</span><a href="#compiler-flags-based-on-build-type" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>Compiler flags are instrumental in controlling the behavior of the compiler, particularly when distinguishing between Debug and Release builds. This section configures these flags to optimize for either debugging or performance, depending on the build type.</p>

<pre><code class="language-cpp">if(CMAKE_BUILD_TYPE STREQUAL Debug)
    message(STATUS "Configuring for a Debug build")
    set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -Wall -g3 -Og")
    add_definitions(-DDEBUG_MODE)
else()
    message(STATUS "Configuring for a Release build")
    set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -Wall -g0 -O3")
endif()
</code></pre>

<p>In Debug mode, the flags enable detailed debugging information (<code class="language-plaintext highlighter-rouge">-g3</code>) and turn off aggressive optimizations (<code class="language-plaintext highlighter-rouge">-Og</code>) to make the debugging process more straightforward.
Additionally, a <code class="language-plaintext highlighter-rouge">DEBUG_MODE</code> macro is defined, which can be used within your code to conditionally include debug-specific logic.
In Release mode, the configuration focuses on optimization (<code class="language-plaintext highlighter-rouge">-O3</code>) and minimal debug information (<code class="language-plaintext highlighter-rouge">-g0</code>) to ensure maximum performance.</p>

<h3 id="platform-specific-dependency-configuration">4.4. <span class="me-2">Platform-Specific Dependency Configuration</span><a href="#platform-specific-dependency-configuration" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>Handling dependencies can be complex, especially when targeting multiple platforms. This section of the CMakeLists.txt is designed to manage platform-specific dependencies and packaging configurations.</p>

<pre><code class="language-py"># Define the platform-specific paths and packaging configurations.
# This ensures that the correct dependencies are used depending on the platform.
if(WIN32)

    # Set the dependency folder for Windows x64.
    set(DEPENDENCY_FOLDER "${CMAKE_SOURCE_DIR}/dependencies/win_x86_64/")

    # Use ZIP as the packaging format for Windows.
    set(CPACK_GENERATOR "ZIP")


elseif (UNIX AND NOT APPLE)
    # Set the dependency folder for Linux x64.
    set(DEPENDENCY_FOLDER "${CMAKE_SOURCE_DIR}/dependencies/linux_x86_64/")
    
    # Use TGZ (tarball gzip) as the packaging format for Linux.
    set(CPACK_GENERATOR "TGZ")

else()

    # Fatal error if the platform is unsupported.
    message(FATAL_ERROR "Unsupported Platform: ${CMAKE_SYSTEM_NAME}")

endif()
</code></pre>

<p>This code block first checks the platform being used (<code class="language-plaintext highlighter-rouge">WIN32</code> for Windows or <code class="language-plaintext highlighter-rouge">UNIX</code> for Linux) and then sets the appropriate directory for dependencies and the correct packaging format (<code class="language-plaintext highlighter-rouge">ZIP</code> for Windows and <code class="language-plaintext highlighter-rouge">TGZ</code> for Linux). If the platform is not supported, CMake will throw a fatal error, stopping the build process.</p>

<h3 id="cmake-prefix-path">4.5. <span class="me-2">CMake Prefix Path</span><a href="#cmake-prefix-path" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>The <code class="language-plaintext highlighter-rouge">CMAKE_PREFIX_PATH</code> variable is used to specify additional directories where CMake should look for packages, particularly when they are not located in standard system paths. This is especially useful when working with third-party libraries that are bundled with your project.</p>

<pre><code class="language-py"># Set the CMake prefix path to include platform-specific dependency directories.
# This helps CMake locate the required libraries and packages.
set(CMAKE_PREFIX_PATH
        "${DEPENDENCY_FOLDER}/pkgconfig/"
        "${DEPENDENCY_FOLDER}/some_library/"
)
</code></pre>

<p>By setting the CMAKE_PREFIX_PATH, you direct CMake to search in the specified directories for the necessary libraries and packages, ensuring that the build process can locate and link all required dependencies.</p>

<p>Of course this assumes the dependencies are set for all platforms.</p>

<pre><code class="language-bash">my_library_project/               
└── dependencies/   
    ├── win_x86_64/     
    |   ├── pkgconfig/           
    |   └── some_library/   
    └── linux_x86_64/  
        ├── pkgconfig/           
        └── some_library/   
</code></pre>

<h3 id="finding-and-configuring-packages">4.6. <span class="me-2">Finding and Configuring Packages</span><a href="#finding-and-configuring-packages" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>Finding and linking external libraries is a common requirement in C++ projects. The find_package command helps automate this process by locating the necessary libraries and integrating them into your project.</p>

<pre><code class="language-py">find_package(PkgConfig REQUIRED)
</code></pre>

<p>Here, we use find_package to locate the PkgConfig tool, which is required to manage the inclusion of external libraries. By marking it as REQUIRED, we ensure that the build process will stop with an error if PkgConfig is not found, preventing any further issues.</p>

<h3 id="output-directory-configuration">4.7. <span class="me-2">Output Directory Configuration</span><a href="#output-directory-configuration" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>To keep the build process organized, it’s important to specify where the compiled binaries and libraries should be output. This not only makes it easier to locate the build artifacts but also keeps your project directory clean.</p>

<pre><code class="language-bash"># Set the output directories for the project.
# These settings ensure that all binaries, libraries, and archives are organized in one place.
set(CMAKE_RUNTIME_OUTPUT_DIRECTORY "${CMAKE_SOURCE_DIR}/output")
set(CMAKE_LIBRARY_OUTPUT_DIRECTORY "${CMAKE_SOURCE_DIR}/output")
set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY "${CMAKE_SOURCE_DIR}/output/lib")
</code></pre>

<p>This configuration sets all the runtime executables, shared libraries, and static libraries to be placed in a central <code class="language-plaintext highlighter-rouge">output</code> directory. The distinction between runtime, library, and archive outputs ensures that the files are well-organized.</p>

<h3 id="adding-subdirectories">4.8. <span class="me-2">Adding Subdirectories</span><a href="#adding-subdirectories" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>In complex projects, organizing your code into subdirectories makes it easier to manage and maintain. The <code class="language-plaintext highlighter-rouge">add_subdirectory</code> command allows you to include additional CMake configurations from different parts of your project.</p>

<pre><code class="language-bash"># Add subdirectories for the library and tests. 
# This modular approach keeps the project organized and easy to manage.
add_subdirectory(my_library)
add_subdirectory(tests)
</code></pre>

<p>By adding subdirectories, you modularize your project, allowing each component, such as the core library and its tests, to have its own CMakeLists.txt file. This makes the overall project more maintainable and scalable.</p>

<hr />

<h2 id="library-cmakeliststxt">5. <span class="me-2">Library CMakeLists.txt</span><a href="#library-cmakeliststxt" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>Now we will look at each section of the <code class="language-plaintext highlighter-rouge">my_library/CMakeLists.txt</code> file, explaining the purpose and nuances of each part.</p>

<h3 id="defining-the-library-target">5.1. <span class="me-2">Defining the Library Target</span><a href="#defining-the-library-target" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>In modern CMake, source files for a library are explicitly listed and associated with the target. This approach makes the build process clear and maintainable.</p>

<pre><code class="language-bash"># Define the my_library library target
add_library(my_library SHARED)

# Add sources to the my_library library target
target_sources(my_library PRIVATE
        source/my_library.cpp
        source/internal_helpers.cpp
        # Add more files as needed
)
</code></pre>

<ul>
  <li>
    <p><strong><code class="language-plaintext highlighter-rouge">add_library(my_library SHARED)</code>:</strong> This command defines a new library target named <code class="language-plaintext highlighter-rouge">my_library</code> and specifies that it should be built as a shared library (<code class="language-plaintext highlighter-rouge">SHARED</code>).</p>
  </li>
  <li>
    <p><strong><code class="language-plaintext highlighter-rouge">target_sources(my_library PRIVATE ...)</code>:</strong> This command explicitly adds the specified source file (<code class="language-plaintext highlighter-rouge">my_library.cpp</code>) to the <code class="language-plaintext highlighter-rouge">my_library</code> library target. The <code class="language-plaintext highlighter-rouge">PRIVATE</code> keyword indicates that the source file is only relevant to this specific target and will not be exposed to other targets.</p>
  </li>
</ul>

<h3 id="passing-version-information-to-the-source-code">5.2. <span class="me-2">Passing Version Information to the Source Code</span><a href="#passing-version-information-to-the-source-code" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>Passing the version number to the source code can be useful for embedding version information into the compiled library, which can be accessed at runtime.</p>

<pre><code class="language-cpp">target_compile_definitions(my_library PRIVATE MY_LIBRARY_VERSION="${PROJECT_VERSION}")
</code></pre>

<p><strong><code class="language-plaintext highlighter-rouge">target_compile_definitions(my_library PRIVATE MY_LIBRARY_VERSION="${PROJECT_VERSION}")</code>:</strong> This command defines a preprocessor macro (<code class="language-plaintext highlighter-rouge">MY_LIBRARY_VERSION</code>) with the value of the project’s version (<code class="language-plaintext highlighter-rouge">${PROJECT_VERSION}</code>), making this version accessible in the source code. The <code class="language-plaintext highlighter-rouge">PRIVATE</code> keyword indicates that this definition is only available within the <code class="language-plaintext highlighter-rouge">my_library</code> target and not propagated to targets that link against this library.</p>

<h3 id="setting-build-flags-for-the-library">5.3. <span class="me-2">Setting Build Flags for the Library</span><a href="#setting-build-flags-for-the-library" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>Defining specific macros during the build process is essential for controlling how the library is compiled and differentiating between internal and external usage of the library. (see <a href="#combined-platform-independent-definition">the section about declaring visiblity</a>)</p>

<pre><code class="language-cpp">target_compile_definitions(my_library PRIVATE BUILDING_MY_LIBRARY="1")
</code></pre>

<p><strong><code class="language-plaintext highlighter-rouge">target_compile_definitions(my_library PRIVATE BUILDING_MY_LIBRARY="1")</code>:</strong> This command establishes the BUILDING_MY_LIBRARY macro with a value of “1”, signaling that the current build is for the library itself. This distinction is crucial for correctly applying the visibility attributes defined earlier, ensuring that internal components are exported properly while maintaining clean separation from the end-user’s environment.</p>

<h3 id="specifying-include-directories">5.4. <span class="me-2">Specifying Include Directories</span><a href="#specifying-include-directories" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>Include directories are necessary for resolving header files during compilation. It’s important to specify both build-time and install-time include directories.</p>

<pre><code class="language-rb"># Specify the include directories for the target
target_include_directories(my_library
    PUBLIC
        # Use absolute path for building
        $&lt;BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/../include&gt;

        # Use relative path for installation
        $&lt;INSTALL_INTERFACE:include&gt;
    PRIVATE
        ${CMAKE_CURRENT_SOURCE_DIR}/internal
)
</code></pre>

<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">target_include_directories(my_library PUBLIC ...)</code>:</strong> This command sets up include directories for the <code class="language-plaintext highlighter-rouge">my_library</code> target. The <code class="language-plaintext highlighter-rouge">PUBLIC</code> keyword indicates that these directories should be used both when building the library and when other targets include this library.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">$&lt;BUILD_INTERFACE:...&gt;</code> and <code class="language-plaintext highlighter-rouge">$&lt;INSTALL_INTERFACE:...&gt;</code></strong>: These generator expressions ensure that different paths are used depending on whether the library is being built (<code class="language-plaintext highlighter-rouge">BUILD_INTERFACE</code>) or installed (<code class="language-plaintext highlighter-rouge">INSTALL_INTERFACE</code>). This separation ensures that the correct paths are used in each context, enhancing portability.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">PRIVATE ${CMAKE_CURRENT_SOURCE_DIR}/internal</code></strong>: This directory is used for internal headers that should not be exposed to users of the library. The <code class="language-plaintext highlighter-rouge">PRIVATE</code> keyword indicates that these include directories are only used when compiling this target.</li>
</ul>

<h3 id="linking-external-libraries">5.5. <span class="me-2">Linking External Libraries</span><a href="#linking-external-libraries" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>To use external libraries like <code class="language-plaintext highlighter-rouge">libmicrohttpd</code>, you need to find and link them to your project. CMake offers several ways to find libraries, including <code class="language-plaintext highlighter-rouge">find_library</code>.</p>

<pre><code class="language-rb"># Find and link the required libmicrohttpd library using pkg-config
find_library(MICROHTTPD_LIB NAMES microhttpd libmicrohttpd)

# Link the static microhttpd library
target_link_libraries(my_library PRIVATE ${MICROHTTPD_LIB})
</code></pre>

<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">find_library(MICROHTTPD_LIB NAMES microhttpd libmicrohttpd)</code>:</strong> This command searches for the <code class="language-plaintext highlighter-rouge">libmicrohttpd</code> library, storing the path in the <code class="language-plaintext highlighter-rouge">MICROHTTPD_LIB</code> variable. The <code class="language-plaintext highlighter-rouge">NAMES</code> option specifies possible names for the library, accommodating different naming conventions on various systems.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">target_link_libraries(my_library PRIVATE ${MICROHTTPD_LIB})</code>:</strong> This command links the <code class="language-plaintext highlighter-rouge">libmicrohttpd</code> library to the <code class="language-plaintext highlighter-rouge">my_library</code> target. The <code class="language-plaintext highlighter-rouge">PRIVATE</code> keyword ensures that this linkage is only relevant for the <code class="language-plaintext highlighter-rouge">my_library</code> target and is not inherited by other targets that depend on it.</li>
</ul>

<h3 id="configuring-visibility-for-internal-functions">5.6. <span class="me-2">Configuring Visibility for Internal Functions</span><a href="#configuring-visibility-for-internal-functions" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>To reduce the binary size and improve load times, it’s important to hide internal symbols that do not need to be exposed outside the library.</p>

<pre><code class="language-cpp">target_compile_options(my_library PRIVATE -fvisibility=hidden)
set_target_properties(my_library PROPERTIES CXX_VISIBILITY_PRESET hidden)
set_target_properties(my_library PROPERTIES VISIBILITY_INLINES_HIDDEN YES)
</code></pre>

<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">target_compile_options(my_library PRIVATE -fvisibility=hidden)</code>:</strong> This option hides symbols by default, making only explicitly marked symbols (using <code class="language-plaintext highlighter-rouge">__attribute__((visibility("default")))</code>) visible outside the library.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">set_target_properties(... PROPERTIES CXX_VISIBILITY_PRESET hidden)</code></strong>: This sets the default visibility of C++ symbols to hidden.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">set_target_properties(... PROPERTIES VISIBILITY_INLINES_HIDDEN YES)</code></strong>: This command hides inline function symbols, further reducing the number of exported symbols and improving binary efficiency.</li>
</ul>

<h3 id="defining-installation-rules-for-the-library">5.7. <span class="me-2"><strong>Defining Installation Rules for the Library</strong></span><a href="#defining-installation-rules-for-the-library" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>Installing your library correctly ensures that it can be easily found and used by other projects. The installation rules specify where the library files will be placed on the target system.</p>

<pre><code class="language-php"># Installation Rules
# Define the installation directories
install(TARGETS my_library
        EXPORT my_libraryTargets
        ARCHIVE DESTINATION lib
        LIBRARY DESTINATION lib
        RUNTIME DESTINATION bin
        INCLUDES DESTINATION include
)
</code></pre>

<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">install(TARGETS my_library ...)</code></strong>: This command defines how the <code class="language-plaintext highlighter-rouge">my_library</code> library should be installed. The <code class="language-plaintext highlighter-rouge">ARCHIVE</code>, <code class="language-plaintext highlighter-rouge">LIBRARY</code>, and <code class="language-plaintext highlighter-rouge">RUNTIME</code> options specify the directories for different types of build outputs (static libraries, shared libraries, and executables, respectively). The <code class="language-plaintext highlighter-rouge">INCLUDES DESTINATION</code> specifies where the public headers will be installed.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">EXPORT my_libraryTargets</code></strong>: This option exports the target, which allows it to be included in the package configuration files, making the library discoverable by other projects using <code class="language-plaintext highlighter-rouge">find_package</code>.</li>
</ul>

<h3 id="installing-public-headers">5.8. <span class="me-2"><strong>Installing Public Headers</strong></span><a href="#installing-public-headers" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<pre><code class="language-php">install(DIRECTORY ../include/ DESTINATION include)
</code></pre>

<p>Alongside the compiled library, you must install the public headers so that they can be included by other projects.</p>

<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">install(DIRECTORY ../include/ DESTINATION include)</code>:</strong> This command installs the contents of the public <code class="language-plaintext highlighter-rouge">include/</code> directory to the <code class="language-plaintext highlighter-rouge">include</code> directory on the target system. This is essential for making the public API available to other projects that depend on your library.</li>
</ul>

<h3 id="installing-package-configuration-files">5.9. <span class="me-2"><strong>Installing Package Configuration Files</strong></span><a href="#installing-package-configuration-files" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<pre><code class="language-php"># Install the package configuration files
install(EXPORT my_libraryTargets
        FILE my_libraryTargets.cmake
        NAMESPACE my_library::
        DESTINATION lib/cmake/my_library
)

# Create and install the package configuration files
include(CMakePackageConfigHelpers)
write_basic_package_version_file(
        "${CMAKE_CURRENT_BINARY_DIR}/my_libraryConfigVersion.cmake"
        VERSION ${PROJECT_VERSION}
        COMPATIBILITY AnyNewerVersion
)

configure_package_config_file(
        "../cmake/my_libraryConfig.cmake.in"
        "${CMAKE_CURRENT_BINARY_DIR}/my_libraryConfig.cmake"
        INSTALL_DESTINATION lib/cmake/my_library
)

install(FILES
        "${CMAKE_CURRENT_BINARY_DIR}/my_libraryConfig.cmake"
        "${CMAKE_CURRENT_BINARY_DIR}/my_libraryConfigVersion.cmake"
        DESTINATION lib/cmake/my_library
)
</code></pre>

<p>To make your library discoverable by CMake’s <code class="language-plaintext highlighter-rouge">find_package</code>, you need to generate and install package configuration files.</p>

<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">install(EXPORT my_libraryTargets ...)</code>:</strong> This command exports the target configuration, allowing it to be used by <code class="language-plaintext highlighter-rouge">find_package</code> when other projects search for <code class="language-plaintext highlighter-rouge">my_library</code>.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">include(CMakePackageConfigHelpers)</code>:</strong> This includes helpers for generating package configuration files.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">write_basic_package_version_file(...)</code>:</strong> Generates a version file that defines the compatibility of the library with different versions.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">configure_package_config_file(...)</code>:</strong> Configures the main package configuration file, which helps other projects find and link against your library.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">install(FILES ...)</code>:</strong> Installs the generated configuration files to the appropriate directory.</li>
</ul>

<h3 id="configuring-package-information-for-distribution">5.10. <span class="me-2"><strong>Configuring Package Information for Distribution</strong></span><a href="#configuring-package-information-for-distribution" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>Finally, to make the library distributable, package information such as the package name, version, and contact details is configured using <code class="language-plaintext highlighter-rouge">CPack</code>.</p>

<pre><code class="language-php"># Set the package name and version
set(CPACK_PACKAGE_NAME "my_library")
set(CPACK_PACKAGE_VERSION ${PROJECT_VERSION})
set(CPACK_PACKAGE_CONTACT "Mustafa Alotbah &lt;mustafa.alotbah@gmail.com&gt;")

# CPACK_GENERATOR set by root CMakeLists.txt
include(CPack)
</code></pre>

<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">set(CPACK_PACKAGE_NAME "my_library")</code>:</strong> Sets the name of the package for distribution.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">set(CPACK_PACKAGE_VERSION ${PROJECT_VERSION})</code>:</strong> Sets the package version, aligning it with the project version.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">set(CPACK_PACKAGE_CONTACT "Mustafa Alotbah &lt;mustafa.alotbah@gmail.com&gt;")</code>:</strong> Provides contact information for the package, useful for users or maintainers.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">include(CPack)</code>:</strong> Includes CPack, which handles the creation of distribution packages based on the specified configuration.</li>
</ul>

<h2 id="cmake-template-file">6. <span class="me-2">CMake Template File</span><a href="#cmake-template-file" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>The <code class="language-plaintext highlighter-rouge">my_libraryConfig.cmake.in</code> file is a template used by CMake to generate a <code class="language-plaintext highlighter-rouge">my_libraryConfig.cmake</code> file during the installation process. This configuration file plays a crucial role in making your library discoverable and easily integrable into other projects through CMake’s <code class="language-plaintext highlighter-rouge">find_package</code> command.</p>

<pre><code class="language-cpp">@PACKAGE_INIT@

include("${CMAKE_CURRENT_LIST_DIR}/my_libraryTargets.cmake")
</code></pre>

<p>The <code class="language-plaintext highlighter-rouge">my_libraryConfig.cmake.in</code> file typically contains initialization code and references to other generated files, such as the <code class="language-plaintext highlighter-rouge">my_libraryTargets.cmake</code>:</p>

<ul>
  <li>
    <p><strong><code class="language-plaintext highlighter-rouge">@PACKAGE_INIT@</code> Macro</strong> is a placeholder that is replaced by CMake with the necessary initialization code when the file is processed. The <code class="language-plaintext highlighter-rouge">@PACKAGE_INIT@</code> macro is essential as it sets up the environment for the package configuration. It ensures that any necessary CMake variables are initialized and that the package configuration is compatible with the CMake version used by the consuming project.</p>
  </li>
  <li>
    <p><strong>Including the <code class="language-plaintext highlighter-rouge">my_libraryTargets.cmake</code> File:</strong> This line includes the <code class="language-plaintext highlighter-rouge">my_libraryTargets.cmake</code> file, which contains the actual definitions of the targets (such as the <code class="language-plaintext highlighter-rouge">my_library</code> library) that were exported during the installation process. This inclusion is critical for making the targets available to projects that use <code class="language-plaintext highlighter-rouge">find_package</code> to locate your library.</p>

    <blockquote>
      <p>Including the <code class="language-plaintext highlighter-rouge">my_libraryTargets.cmake</code> file is what allows other projects to link against your library. It ensures that all necessary targets, build settings, and dependencies are correctly set up in the consuming project. Without this inclusion, the library would not be properly registered with CMake, making it unavailable for use.</p>
    </blockquote>
  </li>
</ul>

<h2 id="source-code">7. <span class="me-2">Source Code</span><a href="#source-code" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>When designing a C++ library that will be used by other projects, it is crucial to manage the visibility of functions and symbols properly. This is particularly important when creating shared libraries, where you want to expose only the necessary API functions while keeping internal details hidden.</p>

<h3 id="source-code-structure">7.1. <span class="me-2">Source Code Structure</span><a href="#source-code-structure" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>For demonstration purposes, we will implement a simple API function, <code class="language-plaintext highlighter-rouge">std::string getVersion()</code>, which returns the version of the library. This API function will internally rely on another function, <code class="language-plaintext highlighter-rouge">std::string internalGetVersion()</code>, which should remain hidden from the library users. The internal function will only be accessible within the library’s codebase.</p>

<p>Given that we have configured the default visibility of all symbols to be hidden (as detailed in the <a href="#configuring-visibility-for-internal-functions">section on configuring visibility for internal functions</a>), we must explicitly declare which symbols should be visible to the outside world. This is achieved using visibility attributes that are platform-specific.</p>

<h3 id="declaring-visibility-in-header-files">7.2. <span class="me-2">Declaring Visibility in Header Files</span><a href="#declaring-visibility-in-header-files" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>To control the visibility of our API and internal functions, we use different attributes depending on the platform.</p>

<h4 id="for-gcc-and-msvc-on-windows">7.2.1. <span class="me-2">For GCC and MSVC on Windows</span><a href="#for-gcc-and-msvc-on-windows" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p>When compiling a shared library on Windows, the <code class="language-plaintext highlighter-rouge">__declspec(dllexport)</code> attribute is used to export functions from a DLL, making them available to other projects that link against the DLL. Conversely, <code class="language-plaintext highlighter-rouge">__declspec(dllimport)</code> is used in the client code to import these functions. We encapsulate this logic in a macro <code class="language-plaintext highlighter-rouge">MY_LIBRARY_API</code>:</p>

<pre><code class="language-cpp">#ifdef BUILDING_MY_LIBRARY
#define MY_LIBRARY_API __declspec(dllexport)
#else
#define MY_LIBRARY_API __declspec(dllimport)
#endif
</code></pre>

<h4 id="for-gcc-on-linux">7.2.2. <span class="me-2">For GCC on Linux</span><a href="#for-gcc-on-linux" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p>On Linux, GCC provides a visibility attribute, <code class="language-plaintext highlighter-rouge">__attribute__((visibility("default")))</code>, which is used to mark symbols that should be visible outside the library. We also define an internal visibility attribute to explicitly hide symbols:</p>

<pre><code class="language-cpp">#if defined(__GNUC__) &amp;&amp; __GNUC__ &gt;= 4
#define MY_LIBRARY_API __attribute__((visibility("default")))
#else
#define MY_LIBRARY_API
#endif
</code></pre>

<h4 id="combined-platform-independent-definition">7.2.3. <span class="me-2">Combined Platform-Independent Definition</span><a href="#combined-platform-independent-definition" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p>To maintain cross-platform compatibility, we combine these definitions into a single header file, <code class="language-plaintext highlighter-rouge">my_project_export.h</code>. This header ensures that the correct visibility attributes are applied based on the target platform:</p>

<pre><code class="language-cpp">#pragma once

#ifdef _WIN32
#ifdef BUILDING_MY_LIBRARY
#define MY_LIBRARY_API __declspec(dllexport)
#else
#define MY_LIBRARY_API __declspec(dllimport)
#endif
#else
#if defined(__GNUC__) &amp;&amp; __GNUC__ &gt;= 4
#define MY_LIBRARY_API __attribute__((visibility("default")))
#else
#define MY_LIBRARY_API
#endif
#endif
</code></pre>

<ul>
  <li>The flag <code class="language-plaintext highlighter-rouge">BUILDING_MY_LIBRARY</code> is defined in the building process in the <code class="language-plaintext highlighter-rouge">CMakeLists.txt</code> of the library, see <a href="#setting-build-flags-for-the-library">here</a>. It is only defined in the build process of the library but must not be defined in the build process of the user.</li>
</ul>

<h3 id="public-api-declaration">7.3. <span class="me-2">Public API Declaration</span><a href="#public-api-declaration" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>In the public API header, <code class="language-plaintext highlighter-rouge">my_library.h</code>, we use the <code class="language-plaintext highlighter-rouge">MY_LIBRARY_API</code> macro to declare the visibility of the <code class="language-plaintext highlighter-rouge">getVersion()</code> function:</p>

<pre><code class="language-cpp">#pragma once

#include "my_project_export.h"
#include &lt;string&gt;

MY_LIBRARY_API std::string getVersion();
</code></pre>

<p>This ensures that <code class="language-plaintext highlighter-rouge">getVersion()</code> is visible to any project that links against the library, while other internal functions remain hidden.</p>

<h3 id="internal-function-declaration">7.4. <span class="me-2">Internal Function Declaration</span><a href="#internal-function-declaration" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>In contrast, the internal function <code class="language-plaintext highlighter-rouge">internalGetVersion()</code> is declared in an internal header, <code class="language-plaintext highlighter-rouge">internal_helpers.h</code>, without any visibility attributes, meaning it will remain hidden:</p>

<pre><code class="language-cpp">#pragma once

#include &lt;string&gt;

std::string internalGetVersion();
</code></pre>

<p>Since this header is marked as <code class="language-plaintext highlighter-rouge">PRIVATE</code> in the CMake configuration (as discussed in the <a href="#specifying-include-directories">section on specifying include directories</a>), it is not exposed to the users of the library when the library is installed.</p>

<h3 id="implementing-the-functions">7.5. <span class="me-2">Implementing the Functions</span><a href="#implementing-the-functions" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>The internal function <code class="language-plaintext highlighter-rouge">internalGetVersion()</code> is implemented in the <code class="language-plaintext highlighter-rouge">source/internal_helpers.cpp</code> file. This function retrieves the version information, which we previously passed to the source code using a preprocessor definition in our CMake configuration:</p>

<pre><code class="language-cpp">#include "internal_server.h"


std::string internalGetVersion() {
    return MY_LIBRARY_VERSION;
}
</code></pre>

<p>The <code class="language-plaintext highlighter-rouge">MY_LIBRARY_VERSION</code> macro was defined earlier in the CMake configuration (as detailed in the <a href="#passing-version-information-to-the-source-code">section on passing version information to the source code</a>).</p>

<p>The <code class="language-plaintext highlighter-rouge">getVersion()</code> API function, which calls the internal function, is implemented in <code class="language-plaintext highlighter-rouge">source/my_library.cpp</code>:</p>

<pre><code class="language-cpp">#include "my_library/my_library.h"
#include "my_library_internal.h"

std::string getVersion() {
    return internalGetVersion();
}
</code></pre>

<p>This structure ensures that while <code class="language-plaintext highlighter-rouge">getVersion()</code> is accessible to external projects, <code class="language-plaintext highlighter-rouge">internalGetVersion()</code> remains encapsulated within the library, hidden from external access.</p>

<h3 id="verifying-visibility-and-symbol-export">7.6. <span class="me-2">Verifying Visibility and Symbol Export</span><a href="#verifying-visibility-and-symbol-export" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>To verify that only the intended symbols are exposed, you can inspect the exported symbols of the compiled shared library. On Linux, this can be done using the <code class="language-plaintext highlighter-rouge">nm</code> command:</p>

<pre><code class="language-bash">nm -C -D lib/libmy_library.so | grep " T "
&gt;&gt;&gt; 
0000000000001120 T getVersion[abi:cxx11]()
</code></pre>

<p>This command lists all symbols marked as globally visible (<code class="language-plaintext highlighter-rouge">T</code>). As expected, only <code class="language-plaintext highlighter-rouge">getVersion()</code> is exposed.</p>

<p>On Windows, you can use the <code class="language-plaintext highlighter-rouge">dumpbin</code> tool to inspect the DLL exports:</p>

<pre><code class="language-bash">dumpbin /EXPORTS libmy_library.dll
&gt;&gt;&gt; 
...
    ordinal hint RVA      name

          1    0 00001370 _Z10getVersionB5cxx11v

  Summary
...
</code></pre>

<p>Again, only the <code class="language-plaintext highlighter-rouge">getVersion()</code> function is visible, confirming that the internal details of the library remain hidden as intended.</p>

<h2 id="installing-the-project">8. <span class="me-2">Installing the Project</span><a href="#installing-the-project" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>After configuring and building the library, it is crucial to install it correctly. This ensures that all necessary files—binaries, headers, and configuration files—are placed in the appropriate directories, ready for use by other projects.</p>

<pre><code class="language-sh">mkdir build 
cd build
cmake .. -G "MinGW Makefiles" -DCMAKE_BUILD_TYPE=Release
cmake --build . --config Release
cmake --install . --prefix .
</code></pre>

<p>These commands create a build directory, configure the project for a release build, and then install the library. The installation process places the compiled binaries, headers, and CMake configuration files in the specified prefix directory.</p>

<p>To package the project for distribution, you can use CPack:</p>

<pre><code class="language-sh">cpack
</code></pre>

<p>CPack generates a package (e.g., a ZIP or TGZ file) containing the installed files, making it easy to distribute the library.</p>

  </div>

  <div class="post-tail-wrapper text-muted">
    <!-- categories -->
    
      <div class="post-meta mb-3">
        <i class="far fa-folder-open fa-fw me-1"></i>
        
          <a href="/categories/software-development/">Software-Development</a>,
          <a href="/categories/cmake/">Cmake</a>
      </div>
    

    <!-- tags -->
    
      <div class="post-tags">
        <i class="fa fa-tags fa-fw me-1"></i>
        
          <a
            href="/tags/software/"
            class="post-tag no-text-decoration"
          >Software</a>
        
          <a
            href="/tags/cmake/"
            class="post-tag no-text-decoration"
          >Cmake</a>
        
          <a
            href="/tags/windows/"
            class="post-tag no-text-decoration"
          >Windows</a>
        
          <a
            href="/tags/c/"
            class="post-tag no-text-decoration"
          >C++</a>
        
          <a
            href="/tags/library/"
            class="post-tag no-text-decoration"
          >Library</a>
        
          <a
            href="/tags/cross-platform/"
            class="post-tag no-text-decoration"
          >Cross-Platform</a>
        
          <a
            href="/tags/build-systems/"
            class="post-tag no-text-decoration"
          >Build-Systems</a>
        
          <a
            href="/tags/dependency-management/"
            class="post-tag no-text-decoration"
          >Dependency-Management</a>
        
          <a
            href="/tags/continuous-integration/"
            class="post-tag no-text-decoration"
          >Continuous-Integration</a>
        
          <a
            href="/tags/ci/"
            class="post-tag no-text-decoration"
          >CI</a>
        
          <a
            href="/tags/cd-ci/"
            class="post-tag no-text-decoration"
          >CD/CI</a>
        
      </div>
    

    <div
      class="
        post-tail-bottom
        d-flex justify-content-between align-items-center mt-5 pb-2
      "
    >
      <div class="license-wrapper">
        
          

          This post is licensed under 
        <a href="https://creativecommons.org/licenses/by/4.0/">
          CC BY 4.0
        </a>
         by the author.
        
      </div>

      <!-- Post sharing snippet -->

<div class="share-wrapper d-flex align-items-center">
  <span class="share-label text-muted">Share</span>
  <span class="share-icons">
    
    
    

    

    <button
      id="copy-link"
      aria-label="Copy link"
      class="btn small"
      data-bs-toggle="tooltip"
      data-bs-placement="top"
      title="Copy link"
      data-title-succeed="Link copied successfully!"
    >
      <i class="fa-fw fas fa-link pe-none fs-6"></i>
    </button>
  </span>
</div>

    </div>
    <!-- .post-tail-bottom -->
  </div>
  <!-- div.post-tail-wrapper -->
</article>


            
          </main>

          <!-- panel -->
          <aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 mb-5 text-muted">
            <div class="access">
              <!-- Get 5 last posted/updated posts -->














  <section id="access-lastmod">
    <h2 class="panel-heading">Recently Updated</h2>
    <ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2">
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/Exploring-Exception-Handling-Mechanisms-in-Embedded-Environments/">Efficient Exception Handling in Resource-Constrained Embedded Systems</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/CMake-Production/">CMake - Publish Your Own Library</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/CMake-Adding-Libraries/">CMake - Adding Libraries</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/CMake-On-Windows/">CMake - Installation On Windows</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/CMake-Brief-Reference/">CMake - Brief Reference</a>
        </li>
      
    </ul>
  </section>
  <!-- #access-lastmod -->


              <!-- The trending tags list -->















  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
        
        



  <section>
    <h2 class="panel-heading">Trending Tags</h2>
    <div class="d-flex flex-wrap mt-3 mb-1 me-3">
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/c/">C++</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/cmake/">Cmake</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/software/">Software</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/windows/">Windows</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/arm/">ARM</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/embedded/">Embedded</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/stm32/">STM32</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/blackpill/">blackpill</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/build-systems/">Build-Systems</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/cd-ci/">CD/CI</a>
      
    </div>
  </section>


            </div>

            
              
              



  <section id="toc-wrapper" class="d-none ps-0 pe-4">
    <h2 class="panel-heading ps-3 mb-2">Contents</h2>
    <nav id="toc"></nav>
  </section>


            
          </aside>
        </div>

        <div class="row">
          <!-- tail -->
          <div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              
              <!-- Recommend the other 3 posts according to the tags and categories of the current post. -->

<!-- The total size of related posts -->


<!-- An random integer that bigger than 0 -->


<!-- Equals to TAG_SCORE / {max_categories_hierarchy} -->















  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
    










  <aside id="related-posts" aria-labelledby="related-label">
    <h3 class="mb-4" id="related-label">Further Reading</h3>
    <nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4">
      
        <article class="col">
          <a href="/posts/CMake-Adding-Libraries/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1700064480"
  data-df="ll"
  
>
  Nov 15, 2023
</time>

              <h4 class="pt-0 my-2">CMake - Adding Libraries</h4>
              <div class="text-muted">
                <p>This post delves into the steps required to integrate several widely-used C++ libraries into your project using CMake. We will explore the setup and usage of Google Test, Google Benchmark, OpenCV, ...</p>
              </div>
            </div>
          </a>
        </article>
      
        <article class="col">
          <a href="/posts/CMake-On-Windows/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1695133080"
  data-df="ll"
  
>
  Sep 19, 2023
</time>

              <h4 class="pt-0 my-2">CMake - Installation On Windows</h4>
              <div class="text-muted">
                <p>Here is a quick way to get started into development with CMake on Windows x64.

Getting Started

Downloads


  Download MinGW64 (posix, seh, msvcrt) from here.
  Download CMake (Windows x64) from h...</p>
              </div>
            </div>
          </a>
        </article>
      
        <article class="col">
          <a href="/posts/CMake-Brief-Reference/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1695129120"
  data-df="ll"
  
>
  Sep 19, 2023
</time>

              <h4 class="pt-0 my-2">CMake - Brief Reference</h4>
              <div class="text-muted">
                <p>CMake is a powerful and flexible build system generator that supports the creation of makefiles, project files, and build environments across various platforms and compilers. Below is a brief refer...</p>
              </div>
            </div>
          </a>
        </article>
      
    </nav>
  </aside>
  <!-- #related-posts -->


            
              
              <!-- Navigation buttons at the bottom of the post. -->

<nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation">
  
  

  
    <a
      href="/posts/CMake-Adding-Libraries/"
      class="btn btn-outline-primary"
      aria-label="Older"
    >
      <p>CMake - Adding Libraries</p>
    </a>
  

  
    <a
      href="/posts/Exploring-Exception-Handling-Mechanisms-in-Embedded-Environments/"
      class="btn btn-outline-primary"
      aria-label="Newer"
    >
      <p>Efficient Exception Handling in Resource-Constrained Embedded Systems</p>
    </a>
  
</nav>

            
              
              <!-- The comments switcher -->


            

            <!-- The Footer -->

<footer
  aria-label="Site Info"
  class="
    d-flex flex-column justify-content-center text-muted
    flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3
  "
>
  <p>©
    <time>2024</time>

    
      <a href="https://github.com/mustafaalotbah">Mustafa Alotbah</a>.
    

    
      <span
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author."
      >Some rights reserved.</span>
    
  </p>

  <p>Using the <a
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="v7.0.1"
        href="https://github.com/cotes2020/jekyll-theme-chirpy"
        target="_blank"
        rel="noopener"
      >Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>.
  </p>
</footer>

          </div>
        </div>

        <!-- The Search results -->

<div id="search-result-wrapper" class="d-flex justify-content-center d-none">
  <div class="col-11 content">
    <div id="search-hints">
      <!-- The trending tags list -->















  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
        
        



  <section>
    <h2 class="panel-heading">Trending Tags</h2>
    <div class="d-flex flex-wrap mt-3 mb-1 me-3">
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/c/">C++</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/cmake/">Cmake</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/software/">Software</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/windows/">Windows</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/arm/">ARM</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/embedded/">Embedded</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/stm32/">STM32</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/blackpill/">blackpill</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/build-systems/">Build-Systems</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/cd-ci/">CD/CI</a>
      
    </div>
  </section>


    </div>
    <div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div>
  </div>
</div>

      </div>

      <aside aria-label="Scroll to Top">
        <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow">
          <i class="fas fa-angle-up"></i>
        </button>
      </aside>
    </div>

    <div id="mask"></div>

    
      <aside
  id="notification"
  class="toast"
  role="alert"
  aria-live="assertive"
  aria-atomic="true"
  data-bs-animation="true"
  data-bs-autohide="false"
>
  <div class="toast-header">
    <button
      type="button"
      class="btn-close ms-auto"
      data-bs-dismiss="toast"
      aria-label="Close"
    ></button>
  </div>
  <div class="toast-body text-center pt-0">
    <p class="px-2 mb-3">A new version of content is available.</p>
    <button type="button" class="btn btn-primary" aria-label="Update">
      Update
    </button>
  </div>
</aside>

    

    <!-- JavaScripts -->
    <!-- JS selector for site. -->

<!-- commons -->



<!-- layout specified -->




  

  
    <!-- image lazy-loading & popup & clipboard -->
    
  















  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  



  <script src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.11/dayjs.min.js,npm/dayjs@1.11.11/locale/en.min.js,npm/dayjs@1.11.11/plugin/relativeTime.min.js,npm/dayjs@1.11.11/plugin/localizedFormat.min.js,npm/tocbot@4.27.20/dist/tocbot.min.js"></script>






<script src="/assets/js/dist/post.min.js"></script>



<!-- Pageviews -->

  

  







    <!--
  Jekyll Simple Search loader
  See: <https://github.com/christian-fei/Simple-Jekyll-Search>
-->





<script>SimpleJekyllSearch({
    searchInput: document.getElementById('search-input'),
    resultsContainer: document.getElementById('search-results'),
    json: '/assets/js/data/search.json',
    searchResultTemplate: '  <article class="px-1 px-sm-2 px-lg-4 px-xl-0">    <header>      <h2>9. <a href="{url}">{title}</a></h2>      <div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1">        {categories}        {tags}      </div>    </header>    <p>{snippet}</p>  </article>',
    noResultsText: '<p class="mt-5">Oops! No results found.</p>',
    templateMiddleware: function(prop, value, template) {
      if (prop === 'categories') {
        if (value === '') {
          return `${value}`;
        } else {
          return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`;
        }
      }

      if (prop === 'tags') {
        if (value === '') {
          return `${value}`;
        } else {
          return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`;
        }
      }
    }
  });
</script>


  </body>
</html>
